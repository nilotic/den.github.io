---
layout: post
title:  "Implementing AutoFill Credential Provider Extensions"
subtitle: "WWDC 2018"
date:   2018-09-07 20:23:33 -0000
background: '/img/posts/wwdc18.png'
---





<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Implementing AutoFill Credential Provider Extensions</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Implementing AutoFill Credential Provider Extensions</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="662f" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4244" id="4244" class="graf graf--h3 graf--leading graf--title">Implementing AutoFill Credential Provider Extensions</h3><h4 name="6417" id="6417" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/721/" data-href="https://developer.apple.com/videos/play/wwdc2018/721/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">WWDC 2018</a></h4><figure name="edd1" id="edd1" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 278px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.800000000000004%;"></div><img class="graf-image" data-image-id="1*rM4lIy1CSOgahPpxmd5ElA.png" data-width="3992" data-height="1588" src="https://cdn-images-1.medium.com/max/800/1*rM4lIy1CSOgahPpxmd5ElA.png"></div></figure><figure name="3e79" id="3e79" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 361px; max-height: 690px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 191.1%;"></div><img class="graf-image" data-image-id="1*TIEKpsQeiCbjdgu1EwF7jA.gif" data-width="361" data-height="690" src="https://cdn-images-1.medium.com/max/800/1*TIEKpsQeiCbjdgu1EwF7jA.gif"></div></figure><figure name="12ec" id="12ec" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 365px; max-height: 688px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 188.5%;"></div><img class="graf-image" data-image-id="1*DvJM4GK3un_CCrvxkB2Cgg.gif" data-width="365" data-height="688" src="https://cdn-images-1.medium.com/max/800/1*DvJM4GK3un_CCrvxkB2Cgg.gif"></div></figure><figure name="d9ce" id="d9ce" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 627px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 89.60000000000001%;"></div><img class="graf-image" data-image-id="1*rRVExjgmiMwUDSo7GJnbAQ.png" data-width="2847" data-height="2552" src="https://cdn-images-1.medium.com/max/800/1*rRVExjgmiMwUDSo7GJnbAQ.png"></div></figure><h3 name="13c8" id="13c8" class="graf graf--h3 graf-after--figure">Password AutoFill Integration</h3><ol class="postList"><li name="7c36" id="7c36" class="graf graf--li graf-after--h3">Configure your project</li><li name="2a16" id="2a16" class="graf graf--li graf-after--li">Implement a credential list</li><li name="9dde" id="9dde" class="graf graf--li graf-after--li">Show credentials in the QuickType bar</li><li name="000c" id="000c" class="graf graf--li graf-after--li">Allow users to configure your extension in Settings</li></ol><h3 name="bc6c" id="bc6c" class="graf graf--h3 graf-after--li">Step1: Configure Your Project</h3><figure name="5e49" id="5e49" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 251px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.8%;"></div><img class="graf-image" data-image-id="1*XANbVrUbZhUJTF7yGDus1A.png" data-width="3876" data-height="1388" src="https://cdn-images-1.medium.com/max/800/1*XANbVrUbZhUJTF7yGDus1A.png"></div><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">Enable the ‘AutoFill Credential Provider’ capability</strong></figcaption></figure><figure name="6863" id="6863" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 504px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72%;"></div><img class="graf-image" data-image-id="1*DHCsRCglLhTvbfMQ3r4vKg.png" data-width="2422" data-height="1744" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*DHCsRCglLhTvbfMQ3r4vKg.png"></div><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">Add an AutoFill Credential Provider extension</strong></figcaption></figure><figure name="824e" id="824e" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 136px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 19.5%;"></div><img class="graf-image" data-image-id="1*eO32s-px4wD5DHDiWvu9Fw.png" data-width="3560" data-height="694" src="https://cdn-images-1.medium.com/max/800/1*eO32s-px4wD5DHDiWvu9Fw.png"></div></figure><h3 name="7c79" id="7c79" class="graf graf--h3 graf-after--figure">Step2: Implement a credential list</h3><figure name="0a75" id="0a75" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 344px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.1%;"></div><img class="graf-image" data-image-id="1*3rJJ8GFwNI6X-VTsyQzBgQ.png" data-width="4114" data-height="2022" src="https://cdn-images-1.medium.com/max/800/1*3rJJ8GFwNI6X-VTsyQzBgQ.png"></div></figure><figure name="8f06" id="8f06" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 349px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.8%;"></div><img class="graf-image" data-image-id="1*wTgx7_-9l7wq_KJnZEMN6w.png" data-width="3944" data-height="1966" src="https://cdn-images-1.medium.com/max/800/1*wTgx7_-9l7wq_KJnZEMN6w.png"></div></figure><figure name="e377" id="e377" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 330px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 47.099999999999994%;"></div><img class="graf-image" data-image-id="1*Z4FhLmObQpoqy4djCHNj8g.png" data-width="4222" data-height="1988" src="https://cdn-images-1.medium.com/max/800/1*Z4FhLmObQpoqy4djCHNj8g.png"></div></figure><figure name="4494" id="4494" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 323px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.1%;"></div><img class="graf-image" data-image-id="1*uOdW8FibTa68nDtIeG6G7w.png" data-width="4346" data-height="2004" src="https://cdn-images-1.medium.com/max/800/1*uOdW8FibTa68nDtIeG6G7w.png"></div></figure><figure name="14e6" id="14e6" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 767px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 109.5%;"></div><img class="graf-image" data-image-id="1*ysVCixr8-a8oaEIbpKthNA.png" data-width="1802" data-height="1974" src="https://cdn-images-1.medium.com/max/800/1*ysVCixr8-a8oaEIbpKthNA.png"></div></figure></div></div></section><section name="017c" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="650d" id="650d" class="graf graf--h4 graf--leading">Best Practice</h4><ul class="postList"><li name="a57a" id="a57a" class="graf graf--li graf-after--h4">Add a cancel button</li><li name="fc88" id="fc88" class="graf graf--li graf-after--li">Allow users to see all their credentials</li><li name="b624" id="b624" class="graf graf--li graf-after--li">Authenticate the user if needed</li></ul><h3 name="e9e0" id="e9e0" class="graf graf--h3 graf-after--li">Step3: Show credentials in the QuickType bar</h3><figure name="a3ea" id="a3ea" class="graf graf--figure graf-after--h3 graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 344px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.2%;"></div><img class="graf-image" data-image-id="1*cj_2As8xfT2a1Kdvjpa3cA.gif" data-width="1132" data-height="557" src="https://cdn-images-1.medium.com/max/800/1*cj_2As8xfT2a1Kdvjpa3cA.gif"></div></figure></div></div></section><section name="88af" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="116a" id="116a" class="graf graf--h4 graf--leading">What you need to do</h4><ul class="postList"><li name="dab8" id="dab8" class="graf graf--li graf-after--h4">Provide credential identities to AutoFill</li><li name="f1e9" id="f1e9" class="graf graf--li graf-after--li">Return passwords from extension</li><li name="be73" id="be73" class="graf graf--li graf-after--li graf--trailing">Show custom authentication UI (optional)</li></ul></div></div></section><section name="586d" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="93f4" id="93f4" class="graf graf--h4 graf--leading"><strong class="markup--strong markup--h4-strong">Provide credential identities to AutoFill</strong></h4><figure name="8d73" id="8d73" class="graf graf--figure graf-after--h4 graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 216px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 30.9%;"></div><img class="graf-image" data-image-id="1*F_b6U-S3YVifa_5vLnfBWw.png" data-width="3532" data-height="1092" src="https://cdn-images-1.medium.com/max/800/1*F_b6U-S3YVifa_5vLnfBWw.png"></div></figure></div></div></section><section name="8441" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="822e" id="822e" class="graf graf--h4 graf--leading">Use the credential identity store</h4><ul class="postList"><li name="210c" id="210c" class="graf graf--li graf-after--h4">Secure, never leaves device</li><li name="c8a1" id="c8a1" class="graf graf--li graf-after--li">Writable only by your app and extension</li><li name="00ee" id="00ee" class="graf graf--li graf-after--li">Read only by AutoFill</li><li name="8cc1" id="8cc1" class="graf graf--li graf-after--li">Modifiable only when extension is enabled</li><li name="4c0f" id="4c0f" class="graf graf--li graf-after--li">Update the store as needed<br>- New credentials are available<br>- Credentials are modified<br>- Credentials are no longer available</li></ul><figure name="66c5" id="66c5" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 333px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 47.5%;"></div><img class="graf-image" data-image-id="1*bsvJxu5A9rf7ua0UfRpqWA.png" data-width="4282" data-height="2036" src="https://cdn-images-1.medium.com/max/800/1*bsvJxu5A9rf7ua0UfRpqWA.png"></div></figure><ul class="postList"><li name="22ec" id="22ec" class="graf graf--li graf-after--figure">The store may be unexpectedly deleted<br>- Extension is disabled, re-enabled<br>- App provides stale credential identities<br>- User restores from backup</li><li name="f155" id="f155" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">ASCredentialIdentityStore</strong></code> can help</li></ul><figure name="032a" id="032a" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 311px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.5%;"></div><img class="graf-image" data-image-id="1*_5dAXWzq7Wg9SKY9D5yIhw.png" data-width="3908" data-height="1738" src="https://cdn-images-1.medium.com/max/800/1*_5dAXWzq7Wg9SKY9D5yIhw.png"></div></figure><figure name="ec0a" id="ec0a" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 1273px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 181.9%;"></div><img class="graf-image" data-image-id="1*G3wEouXm2BgG6hJiR5xcig.png" data-width="1368" data-height="2488" src="https://cdn-images-1.medium.com/max/800/1*G3wEouXm2BgG6hJiR5xcig.png"></div></figure><figure name="70f6" id="70f6" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 618px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 88.3%;"></div><img class="graf-image" data-image-id="1*yy18uFI7tWiiC0t_4_yXUw.png" data-width="4056" data-height="3582" src="https://cdn-images-1.medium.com/max/800/1*yy18uFI7tWiiC0t_4_yXUw.png"></div></figure></div></div></section><section name="89de" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="903b" id="903b" class="graf graf--h4 graf--leading">Provide passwords from your extension</h4><ul class="postList"><li name="751e" id="751e" class="graf graf--li graf-after--h4">Respond to the initial request quickly</li><li name="165b" id="165b" class="graf graf--li graf-after--li">Users don’t see your UI yet</li><li name="0066" id="0066" class="graf graf--li graf-after--li graf--trailing">AutoFill will cancel the request after a timeout<br>- Except simulator and debug builds</li></ul></div></div></section><section name="2765" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="49c1" id="49c1" class="graf graf--h4 graf--leading">Best practices</h4><ul class="postList"><li name="2c13" id="2c13" class="graf graf--li graf-after--h4">Keep the credential identity store up-to-date</li><li name="2d8b" id="2d8b" class="graf graf--li graf-after--li">Use <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">ASCredentialIdentityStore</strong></code><strong class="markup--strong markup--li-strong"> </strong>incremental update APIs</li><li name="ad6d" id="ad6d" class="graf graf--li graf-after--li">Keep extension UI to a minimum</li><li name="bcb1" id="bcb1" class="graf graf--li graf-after--li">Avoid expensive setup in every <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">viewDidLoad()</strong></code></li></ul><h3 name="c71c" id="c71c" class="graf graf--h3 graf-after--li">Step4: Allow Users to Configure Your Extension in Settings</h3><ul class="postList"><li name="a547" id="a547" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Your extension may require additional setup after being enabled<br>- </strong>Provide credential identities for QuickType<br>- Sign user into online service<br>- Get user authentication or confirmation for QuickType</li><li name="5c46" id="5c46" class="graf graf--li graf-after--li">AuthenticationServices provides API for this</li></ul><figure name="9ac9" id="9ac9" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 284px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.6%;"></div><img class="graf-image" data-image-id="1*FH4hNX24M25QpDYBmhuZJg.png" data-width="3860" data-height="1566" src="https://cdn-images-1.medium.com/max/800/1*FH4hNX24M25QpDYBmhuZJg.png"></div></figure><figure name="cd10" id="cd10" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 390px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 55.7%;"></div><img class="graf-image" data-image-id="1*Ufl6_2QbXS16MeA0U8O0hA.png" data-width="3790" data-height="2110" src="https://cdn-images-1.medium.com/max/800/1*Ufl6_2QbXS16MeA0U8O0hA.png"></div></figure><h3 name="e6b3" id="e6b3" class="graf graf--h3 graf-after--figure">Extension Development ⚠️</h3><h4 name="4ecb" id="4ecb" class="graf graf--h4 graf-after--h3">Best practices</h4><ul class="postList"><li name="561e" id="561e" class="graf graf--li graf-after--h4">User separate view controllers</li><li name="fd6c" id="fd6c" class="graf graf--li graf-after--li">Present or user view controller containment</li></ul><figure name="6221" id="6221" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 244px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.8%;"></div><img class="graf-image" data-image-id="1*TlNj3w02chqtL8iwR2gPAg.png" data-width="3050" data-height="1062" src="https://cdn-images-1.medium.com/max/800/1*TlNj3w02chqtL8iwR2gPAg.png"></div></figure><ul class="postList"><li name="fd29" id="fd29" class="graf graf--li graf-after--figure">Extensions should be lightweight</li><li name="9dc2" id="9dc2" class="graf graf--li graf-after--li graf--trailing">Use App Groups, shared keychains</li></ul></div></div></section><section name="09ee" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="e0b2" id="e0b2" class="graf graf--h4 graf--leading">Debugging AutoFill Credential Provider extensions</h4><p name="fc63" id="fc63" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Use “Debug” &gt; Attach to Process” for other cases</strong><br><strong class="markup--strong markup--p-strong">Use Safari to test filling credentials</strong></p><p name="f709" id="f709" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">1.</strong> Select your extension’s scheme</p><figure name="35af" id="35af" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 73px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 10.4%;"></div><img class="graf-image" data-image-id="1*_vWguKVV2tSXbM9n8zMDwg.png" data-width="1618" data-height="168" src="https://cdn-images-1.medium.com/max/800/1*_vWguKVV2tSXbM9n8zMDwg.png"></div></figure><p name="8364" id="8364" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">2.</strong> Run with Safari as a target</p><figure name="90ff" id="90ff" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 423px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 60.5%;"></div><img class="graf-image" data-image-id="1*K8TFdYYjKyQNOsFAXtEl8Q.png" data-width="1620" data-height="980" src="https://cdn-images-1.medium.com/max/800/1*K8TFdYYjKyQNOsFAXtEl8Q.png"></div></figure><p name="3f48" id="3f48" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">3.</strong> Invoke your extension</p><figure name="ce84" id="ce84" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 1341px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 191.5%;"></div><img class="graf-image" data-image-id="1*t7nssasirHJzAgh7EDmRAA.png" data-width="1300" data-height="2490" src="https://cdn-images-1.medium.com/max/800/1*t7nssasirHJzAgh7EDmRAA.png"></div></figure></div></div></section>
</section>