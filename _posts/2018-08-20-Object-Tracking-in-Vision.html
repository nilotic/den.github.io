---
layout: post
title:  "Object Tracking in Vision"
subtitle: "WWDC 2018"
date:   2018-08-20 20:23:33 -0000
background: '/img/posts/wwdc18.png'
---




<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Object Tracking in Vision</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Object Tracking in Vision</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="e1ea" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="372c" id="372c" class="graf graf--h3 graf--leading graf--title">Object Tracking in Vision</h3><h4 name="ea9d" id="ea9d" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/716/" data-href="https://developer.apple.com/videos/play/wwdc2018/716/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">WWDC 2018</a></h4><h3 name="5a19" id="5a19" class="graf graf--h3 graf-after--h4">Vision in a Nutshell</h3><ul class="postList"><li name="ebb0" id="ebb0" class="graf graf--li graf-after--h3">One stop for solving computer vision problems</li><li name="b88a" id="b88a" class="graf graf--li graf-after--li">Simple, consistent interface</li><li name="6edb" id="6edb" class="graf graf--li graf-after--li">Runs on iOS, macOS, and tvOS</li><li name="b718" id="b718" class="graf graf--li graf-after--li">Privacy-oriented</li><li name="f8c7" id="f8c7" class="graf graf--li graf-after--li">Continuously evolving</li></ul><h3 name="2e8f" id="2e8f" class="graf graf--h3 graf-after--li">Vision Basics</h3><figure name="182d" id="182d" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 245px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35%;"></div><img class="graf-image" data-image-id="1*FQfWLj8kMHbTnLLOziFQ-A.png" data-width="4666" data-height="1634" src="https://cdn-images-1.medium.com/max/800/1*FQfWLj8kMHbTnLLOziFQ-A.png"></div></figure><h3 name="16ad" id="16ad" class="graf graf--h3 graf-after--figure">Requests</h3><figure name="af58" id="af58" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 324px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.300000000000004%;"></div><img class="graf-image" data-image-id="1*ivC_kiAk2y3hxc972QmDMg.png" data-width="4062" data-height="1882" src="https://cdn-images-1.medium.com/max/800/1*ivC_kiAk2y3hxc972QmDMg.png"></div></figure><h3 name="bd34" id="bd34" class="graf graf--h3 graf-after--figure">Request Handlers</h3><figure name="1229" id="1229" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 288px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.099999999999994%;"></div><img class="graf-image" data-image-id="1*wPqjBRGJ_qVrOitPMT4Q2Q.png" data-width="4676" data-height="1922" src="https://cdn-images-1.medium.com/max/800/1*wPqjBRGJ_qVrOitPMT4Q2Q.png"></div></figure><h3 name="4c89" id="4c89" class="graf graf--h3 graf-after--figure">Observations</h3><ul class="postList"><li name="e375" id="e375" class="graf graf--li graf-after--h3">Family of classes derived from <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNObservation</strong></code></li><li name="5edc" id="5edc" class="graf graf--li graf-after--li">How to obtain a <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNObservation</strong></code> ?<br>- Returned in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNRequest results</strong></code> property<br>- Can be manually created</li></ul><figure name="34a9" id="34a9" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 514px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 73.4%;"></div><img class="graf-image" data-image-id="1*whhn1MmBriLFUMVrjC8MAQ.png" data-width="1654" data-height="1214" src="https://cdn-images-1.medium.com/max/800/1*whhn1MmBriLFUMVrjC8MAQ.png"></div></figure><h3 name="0ac3" id="0ac3" class="graf graf--h3 graf-after--figure">New Face Detector</h3><ul class="postList"><li name="5cf2" id="5cf2" class="graf graf--li graf-after--h3">Finds more faces</li><li name="da76" id="da76" class="graf graf--li graf-after--li">Now orientation-agnostic</li></ul><figure name="da27" id="da27" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 284px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.5%;"></div><img class="graf-image" data-image-id="1*NfFayXNwrgssWpLJOwviug.png" data-width="800" data-height="324" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*NfFayXNwrgssWpLJOwviug.png"></div></figure><ul class="postList"><li name="c4c5" id="c4c5" class="graf graf--li graf-after--figure"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNDetectFaceRectanglesRequest</strong></code> (Sample API)</li><li name="f5fb" id="f5fb" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNDetectFaceRectanglesRequestRevision2</strong></code></li><li name="0763" id="0763" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNFaceObservation</strong></code> has 2 new properties</li></ul><figure name="d4f1" id="d4f1" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 169px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 24.099999999999998%;"></div><img class="graf-image" data-image-id="1*VALHEI4aJvcEf387uDQxYw.png" data-width="4790" data-height="1154" src="https://cdn-images-1.medium.com/max/800/1*VALHEI4aJvcEf387uDQxYw.png"></div></figure><h3 name="9645" id="9645" class="graf graf--h3 graf-after--figure">Request Revisioning</h3><ul class="postList"><li name="ad3e" id="ad3e" class="graf graf--li graf-after--h3">Vision Request now support revisioning</li><li name="a363" id="a363" class="graf graf--li graf-after--li">Future-proof your app — Error for unavailable functionality</li></ul><h3 name="391a" id="391a" class="graf graf--h3 graf-after--li">Image Request Handler</h3><ul class="postList"><li name="0e45" id="0e45" class="graf graf--li graf-after--h3">Used to process one or more requests on the same image</li><li name="acc8" id="acc8" class="graf graf--li graf-after--li">Optimizes performance by caching image derivatives and request results</li></ul><figure name="40a1" id="40a1" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 141px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20.200000000000003%;"></div><img class="graf-image" data-image-id="1*nktAS3y3pr9_Mu_MmZkuhg.png" data-width="4684" data-height="946" src="https://cdn-images-1.medium.com/max/800/1*nktAS3y3pr9_Mu_MmZkuhg.png"></div></figure><h3 name="a275" id="a275" class="graf graf--h3 graf-after--figure">Sequence Request Handler</h3><ul class="postList"><li name="a8a6" id="a8a6" class="graf graf--li graf-after--h3">Processes requests on the sequence of images</li><li name="650c" id="650c" class="graf graf--li graf-after--li">Used to process 2 types of requests — Tracking and Image Registration</li></ul><figure name="636a" id="636a" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 336px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48%;"></div><img class="graf-image" data-image-id="1*ho-gjtYfrvlbiUTi4qkyTw.png" data-width="4698" data-height="2254" src="https://cdn-images-1.medium.com/max/800/1*ho-gjtYfrvlbiUTi4qkyTw.png"></div></figure><h3 name="de57" id="de57" class="graf graf--h3 graf-after--figure">VNRequest Initialization</h3><figure name="7373" id="7373" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 93px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 13.3%;"></div><img class="graf-image" data-image-id="1*MI4g1yFKsMB3asMVJelFgQ.png" data-width="4682" data-height="622" src="https://cdn-images-1.medium.com/max/800/1*MI4g1yFKsMB3asMVJelFgQ.png"></div><figcaption class="imageCaption">Mandatory — Must be provided via initializer, overriding is OK</figcaption></figure><figure name="9cbb" id="9cbb" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 93px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 13.3%;"></div><img class="graf-image" data-image-id="1*4iuna7bt1mbOw5GtC7tiPQ.png" data-width="4686" data-height="622" src="https://cdn-images-1.medium.com/max/800/1*4iuna7bt1mbOw5GtC7tiPQ.png"></div><figcaption class="imageCaption">Optional — Initialized to default value, overriding is OK</figcaption></figure><h3 name="03d8" id="03d8" class="graf graf--h3 graf-after--figure">Understanding Results</h3><ul class="postList"><li name="3852" id="3852" class="graf graf--li graf-after--h3">Collection of <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNObservation</strong></code> objects in <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNRequest results</strong></code> property</li></ul><figure name="287c" id="287c" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 85px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 12.2%;"></div><img class="graf-image" data-image-id="1*90W6Vc9EDEl83GlCc8nYPw.png" data-width="3984" data-height="486" src="https://cdn-images-1.medium.com/max/800/1*90W6Vc9EDEl83GlCc8nYPw.png"></div></figure><ul class="postList"><li name="e85f" id="e85f" class="graf graf--li graf-after--figure">The number of observations is from <strong class="markup--strong markup--li-strong">0~n</strong></li><li name="2e1b" id="2e1b" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNObservation</strong></code><strong class="markup--strong markup--li-strong"> is immutable</strong></li><li name="d1ee" id="d1ee" class="graf graf--li graf-after--li">Important common observation properties:<br>- <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">uuid</strong></code> — is used to match related results<br>- <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">confidence</strong></code> — Shows quality of returned results</li></ul><h3 name="83b2" id="83b2" class="graf graf--h3 graf-after--li">Request Pipelines</h3><figure name="9c50" id="9c50" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 62px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 8.9%;"></div><img class="graf-image" data-image-id="1*zDhVtj6oip31yiwHvQemrQ.png" data-width="2998" data-height="266" src="https://cdn-images-1.medium.com/max/800/1*zDhVtj6oip31yiwHvQemrQ.png"></div><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">Pipeline — requests are executed to fullfill dependency</strong></figcaption></figure><figure name="bddb" id="bddb" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 157px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 22.400000000000002%;"></div><img class="graf-image" data-image-id="1*H9An1jBJITLyNly6_vTc1Q.png" data-width="3068" data-height="688" src="https://cdn-images-1.medium.com/max/800/1*H9An1jBJITLyNly6_vTc1Q.png"></div></figure><figure name="599d" id="599d" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 121px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 17.299999999999997%;"></div><img class="graf-image" data-image-id="1*G8YERXKn85ZuMGMHywhlLw.png" data-width="4716" data-height="816" src="https://cdn-images-1.medium.com/max/800/1*G8YERXKn85ZuMGMHywhlLw.png"></div></figure><figure name="ddfa" id="ddfa" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 232px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.1%;"></div><img class="graf-image" data-image-id="1*gI-Rfy5ZCzhOaqjDkU33Gg.png" data-width="4744" data-height="1572" src="https://cdn-images-1.medium.com/max/800/1*gI-Rfy5ZCzhOaqjDkU33Gg.png"></div></figure><h3 name="7116" id="7116" class="graf graf--h3 graf-after--figure">Lifecycle Management</h3><p name="a267" id="a267" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">How long to keep objects in memory?</strong></p><ul class="postList"><li name="590d" id="590d" class="graf graf--li graf-after--p">Image Request Handler (While the image needs processing)</li><li name="1580" id="1580" class="graf graf--li graf-after--li">Sequence Request Handler (While the sequence needs processing)</li><li name="287e" id="287e" class="graf graf--li graf-after--li">Requests/Observations (Lightweight objects, create/release as needed</li></ul><h3 name="b328" id="b328" class="graf graf--h3 graf-after--li">Where to Process Your Requests?</h3><ul class="postList"><li name="ac3a" id="ac3a" class="graf graf--li graf-after--h3">Many requests in Vision rely on Neural Networks</li><li name="b9c4" id="b9c4" class="graf graf--li graf-after--li">Neural Networks usually <strong class="markup--strong markup--li-strong">run faster on GPUs</strong></li><li name="aa5b" id="aa5b" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Vision can run requests on both CPU and GPU<br></strong>- <strong class="markup--strong markup--li-strong">Default</strong>: Use GPU, switch to CPU if GPU is busy<br>- <strong class="markup--strong markup--li-strong">Explicit</strong>: Set <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNRequest usesCPUOnly</strong></code> to true</li></ul><h3 name="780f" id="780f" class="graf graf--h3 graf-after--li">Tracking in General</h3><ul class="postList"><li name="2199" id="2199" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Object of interest: </strong>Auto-detected or manually selected</li><li name="7cb3" id="7cb3" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Sequence of frames:</strong> Camera feed</li><li name="d58a" id="d58a" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Tracking:</strong> Look for the object of interest</li><li name="3aa5" id="3aa5" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Applications:</strong> Focus tracking with camera</li></ul><figure name="5809" id="5809" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 115px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 16.5%;"></div><img class="graf-image" data-image-id="1*DvBoDClvDnHwCMSDsgPAhg.png" data-width="4717" data-height="778" src="https://cdn-images-1.medium.com/max/800/1*DvBoDClvDnHwCMSDsgPAhg.png"></div></figure><h3 name="f044" id="f044" class="graf graf--h3 graf-after--figure">Why Tracking and Not Detection?</h3><ul class="postList"><li name="9cb2" id="9cb2" class="graf graf--li graf-after--h3">No specific detectors for all objects</li><li name="4a3e" id="4a3e" class="graf graf--li graf-after--li">Need to match detected objects</li><li name="100e" id="100e" class="graf graf--li graf-after--li">Trackers use temporal information</li><li name="fb5c" id="fb5c" class="graf graf--li graf-after--li">Speed — Trackers are faster</li><li name="41b1" id="41b1" class="graf graf--li graf-after--li">Trackers are smoother, not as jittery</li></ul><h3 name="ebbd" id="ebbd" class="graf graf--h3 graf-after--li">Tracking Types in Vision</h3><figure name="08b7" id="08b7" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 329px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.9%;"></div><img class="graf-image" data-image-id="1*DUYwnbQmnH8Dj0yBn8R0GA.png" data-width="4624" data-height="2170" src="https://cdn-images-1.medium.com/max/800/1*DUYwnbQmnH8Dj0yBn8R0GA.png"></div></figure><h3 name="0807" id="0807" class="graf graf--h3 graf-after--figure">Demo</h3><ul class="postList"><li name="4238" id="4238" class="graf graf--li graf-after--h3"><a href="https://developer.apple.com/documentation/vision/tracking_multiple_objects_or_rectangles_in_video" data-href="https://developer.apple.com/documentation/vision/tracking_multiple_objects_or_rectangles_in_video" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Sample Link</a></li></ul><figure name="b1ed" id="b1ed" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 144px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20.599999999999998%;"></div><img class="graf-image" data-image-id="1*W6_mX2SVFM4rLnB3C7U8Rg.gif" data-width="885" data-height="182" src="https://cdn-images-1.medium.com/max/800/1*W6_mX2SVFM4rLnB3C7U8Rg.gif"></div></figure><figure name="01ac" id="01ac" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 340px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.6%;"></div><img class="graf-image" data-image-id="1*s6FLf_381evKTCxMn9rsvg.gif" data-width="838" data-height="407" src="https://cdn-images-1.medium.com/max/800/1*s6FLf_381evKTCxMn9rsvg.gif"></div></figure><h3 name="4443" id="4443" class="graf graf--h3 graf-after--figure">Tracking in Vision</h3><ul class="postList"><li name="3f9c" id="3f9c" class="graf graf--li graf-after--h3">Initial object of interest selection<br>- Automatic: By running an appropriate detector<br>- Manual: User input</li><li name="e731" id="e731" class="graf graf--li graf-after--li">One tracking request per tracked object (1:1</li><li name="b4cc" id="b4cc" class="graf graf--li graf-after--li">2 Types: <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNTrackObjectRequest</strong></code> , <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNTrackRectangleRequest</strong></code></li><li name="f619" id="f619" class="graf graf--li graf-after--li">Tracking algorithm: <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">trackingLevel = .fast / .accurate</strong></code></li><li name="5449" id="5449" class="graf graf--li graf-after--li">Tracking quality: Use observation <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">confidence</strong></code> property</li><li name="8b9c" id="8b9c" class="graf graf--li graf-after--li">How many objects can we track simultaneously?<br><strong class="markup--strong markup--li-strong">- Limit: 16 trackers of each type at a time<br>- Error is returned if over limit</strong></li><li name="94be" id="94be" class="graf graf--li graf-after--li">How to release a tracker?<br>- Request’s property <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">lastFrame = true</strong></code> <br>- Release <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">VNSequenceRequestHandler</strong></code></li></ul><h3 name="fa0c" id="fa0c" class="graf graf--h3 graf-after--li"><strong class="markup--strong markup--h3-strong">Tracking Challenges</strong></h3><ul class="postList"><li name="7604" id="7604" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Fast</strong> or <strong class="markup--strong markup--li-strong">accurate ?</strong></li><li name="f6e6" id="f6e6" class="graf graf--li graf-after--li">Initial <strong class="markup--strong markup--li-strong">bounding box</strong> location, use salient object</li><li name="5907" id="5907" class="graf graf--li graf-after--li">Which confidence level threshold to use?</li><li name="25f1" id="25f1" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Consider rerunning detectors every N frames</strong></li></ul><figure name="5724" id="5724" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 118px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 16.8%;"></div><img class="graf-image" data-image-id="1*Te5C2Xl4lPjeSRexw0wQeQ.png" data-width="4748" data-height="798" src="https://cdn-images-1.medium.com/max/800/1*Te5C2Xl4lPjeSRexw0wQeQ.png"></div><figcaption class="imageCaption">Objects change their shape, size, appearance, color, …</figcaption></figure></div></div></section>
</section>