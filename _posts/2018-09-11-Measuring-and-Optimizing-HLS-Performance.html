---
layout: post
title:  "Measuring and Optimizing HLS Performance"
subtitle: "WWDC 2018"
date:   2018-09-11 20:23:33 -0000
background: '/img/posts/wwdc18.png'
---




<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Measuring and Optimizing HLS Performance</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Measuring and Optimizing HLS Performance</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="739a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="ef2a" id="ef2a" class="graf graf--h3 graf--leading graf--title">Measuring and Optimizing HLS Performance</h3><h4 name="5733" id="5733" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/502/" data-href="https://developer.apple.com/videos/play/wwdc2018/502/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">WWDC 2018</a></h4><h3 name="0c62" id="0c62" class="graf graf--h3 graf-after--h4">Best User Experience for HLS</h3><ul class="postList"><li name="a4e9" id="a4e9" class="graf graf--li graf-after--h3">Content authoring → playlist authoring, media formats, codecs</li><li name="9ca5" id="9ca5" class="graf graf--li graf-after--li">Application design → using the AVFoundation API</li><li name="70bd" id="70bd" class="graf graf--li graf-after--li">Delivery → server configuration and performance</li><li name="bf67" id="bf67" class="graf graf--li graf-after--li">Understand and quantify user experience in conjunction with your changes</li><li name="3e4d" id="3e4d" class="graf graf--li graf-after--li">Measure to find the optimal configuration</li></ul><h3 name="a6d2" id="a6d2" class="graf graf--h3 graf-after--li">What Is This Session About?</h3><ul class="postList"><li name="3182" id="3182" class="graf graf--li graf-after--h3">Establish a common language for streaming Quality of Service</li><li name="55a1" id="55a1" class="graf graf--li graf-after--li">Objectively measure the streaming QoS</li><li name="bbaf" id="bbaf" class="graf graf--li graf-after--li">Identify and solve problems that impair Qos</li><li name="cdc3" id="cdc3" class="graf graf--li graf-after--li">Get master playlists right</li></ul><h3 name="fc6b" id="fc6b" class="graf graf--h3 graf-after--li">Anatomy of an HLS Playback session</h3><figure name="a667" id="a667" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 347px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.6%;"></div><img class="graf-image" data-image-id="1*fd4FOZkrLu_OTRnchQPzhQ.gif" data-width="1280" data-height="635" src="https://cdn-images-1.medium.com/max/800/1*fd4FOZkrLu_OTRnchQPzhQ.gif"></div></figure><h3 name="c30b" id="c30b" class="graf graf--h3 graf-after--figure">Quantifying the User Experience</h3><p name="d07b" id="d07b" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Key Performance Indicator (KPIs) for HLS</strong></p><figure name="92dc" id="92dc" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 408px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 58.4%;"></div><img class="graf-image" data-image-id="1*fB0YQ8tsel2C5XVAjp_U8g.png" data-width="3928" data-height="2292" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*fB0YQ8tsel2C5XVAjp_U8g.png"></div></figure><h3 name="85b0" id="85b0" class="graf graf--h3 graf-after--figure">Startup Time</h3><p name="98e8" id="98e8" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">How much time did users spend waiting for playback to start?</strong></p><figure name="fc18" id="fc18" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 336px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48%;"></div><img class="graf-image" data-image-id="1*GqdtVt3VWnEZ5UyXxqBDWg.png" data-width="4182" data-height="2006" src="https://cdn-images-1.medium.com/max/800/1*GqdtVt3VWnEZ5UyXxqBDWg.png"></div></figure><h3 name="6a2a" id="6a2a" class="graf graf--h3 graf-after--figure">Stall Rate</h3><ul class="postList"><li name="5d0b" id="5d0b" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">How often was playback interrupted?</strong></li></ul><figure name="16f9" id="16f9" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 300px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.8%;"></div><img class="graf-image" data-image-id="1*rAmem7Du5a3QPAaeWHi4Lg.png" data-width="4402" data-height="1884" src="https://cdn-images-1.medium.com/max/800/1*rAmem7Du5a3QPAaeWHi4Lg.png"></div></figure><ul class="postList"><li name="c770" id="c770" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">How long was playback interrupted?</strong></li></ul><figure name="25fc" id="25fc" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 299px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.699999999999996%;"></div><img class="graf-image" data-image-id="1*W6fBkN6rLMcDT7yClcRCEQ.png" data-width="4488" data-height="1918" src="https://cdn-images-1.medium.com/max/800/1*W6fBkN6rLMcDT7yClcRCEQ.png"></div></figure><figure name="0a70" id="0a70" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 300px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.8%;"></div><img class="graf-image" data-image-id="1*LbNQK8MJaoA9PmaAXt2Psg.png" data-width="3278" data-height="1404" src="https://cdn-images-1.medium.com/max/800/1*LbNQK8MJaoA9PmaAXt2Psg.png"></div></figure><h3 name="9b6b" id="9b6b" class="graf graf--h3 graf-after--figure">AVPlayerItemAccessLog</h3><p name="bd6a" id="bd6a" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Provides a history of the playback session</strong></p><figure name="15c7" id="15c7" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 327px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.7%;"></div><img class="graf-image" data-image-id="1*xZTr28tdDkLDQpxE1toDlQ.gif" data-width="1280" data-height="598" src="https://cdn-images-1.medium.com/max/800/1*xZTr28tdDkLDQpxE1toDlQ.gif"></div></figure><h3 name="e3b7" id="e3b7" class="graf graf--h3 graf-after--figure">Time-Weighted Indicated Bitrate</h3><p name="af5f" id="af5f" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">What was the overall media quality?</strong></p><figure name="016c" id="016c" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 276px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.4%;"></div><img class="graf-image" data-image-id="1*qUwXQr-R_wNwTQCVV59VtQ.gif" data-width="1231" data-height="485" src="https://cdn-images-1.medium.com/max/800/1*qUwXQr-R_wNwTQCVV59VtQ.gif"></div></figure><figure name="4f2f" id="4f2f" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 278px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.7%;"></div><img class="graf-image" data-image-id="1*h2EPTIZqU-Noakpu5vQCiQ.png" data-width="3754" data-height="1490" src="https://cdn-images-1.medium.com/max/800/1*h2EPTIZqU-Noakpu5vQCiQ.png"></div></figure><h3 name="1e65" id="1e65" class="graf graf--h3 graf-after--figure">Playback Failure Percentage</h3><p name="8864" id="8864" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">How often did the stream end due to an error?</strong></p><figure name="f16e" id="f16e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 280px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40%;"></div><img class="graf-image" data-image-id="1*I4kea7YCy3sK0yN2OLQFJA.png" data-width="4472" data-height="1790" src="https://cdn-images-1.medium.com/max/800/1*I4kea7YCy3sK0yN2OLQFJA.png"></div></figure><h3 name="0a08" id="0a08" class="graf graf--h3 graf-after--figure">AVPlayerItemErrorLog</h3><p name="1fdf" id="1fdf" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Conveys failures with varying degrees of user impact</strong></p><figure name="338a" id="338a" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 317px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.300000000000004%;"></div><img class="graf-image" data-image-id="1*Ej9z5DbLaUzlyg_Sua2zbA.png" data-width="4410" data-height="1998" src="https://cdn-images-1.medium.com/max/800/1*Ej9z5DbLaUzlyg_Sua2zbA.png"></div></figure><h3 name="7cd4" id="7cd4" class="graf graf--h3 graf-after--figure">The User Experience</h3><p name="d4b7" id="d4b7" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Key performance indicators for HLS</strong></p><ul class="postList"><li name="ee4c" id="ee4c" class="graf graf--li graf-after--p">KPIs are not always comparable between device models and usage scenarios</li><li name="ed60" id="ed60" class="graf graf--li graf-after--li">Gather context information along with your streaming metrics</li><li name="8eba" id="8eba" class="graf graf--li graf-after--li">Partition your playback sessions in classes that make sense for your application</li></ul><figure name="233b" id="233b" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 314px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.9%;"></div><img class="graf-image" data-image-id="1*BQunUOlttu2_MK1tsqDChw.png" data-width="4426" data-height="1986" src="https://cdn-images-1.medium.com/max/800/1*BQunUOlttu2_MK1tsqDChw.png"></div></figure><h3 name="5b06" id="5b06" class="graf graf--h3 graf-after--figure">Sample</h3><ul class="postList"><li name="c572" id="c572" class="graf graf--li graf-after--h3"><a href="https://developer.apple.com/documentation/avfoundation/media_assets_playback_and_editing/using_avfoundation_to_play_and_persist_http_live_streams" data-href="https://developer.apple.com/documentation/avfoundation/media_assets_playback_and_editing/using_avfoundation_to_play_and_persist_http_live_streams" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Using AVFoundation to Play and Persist HTTP Live Streams</a></li></ul><h3 name="6c7a" id="6c7a" class="graf graf--h3 graf-after--li">What can Delay Start of playback?</h3><figure name="7ac0" id="7ac0" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 341px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.8%;"></div><img class="graf-image" data-image-id="1*2JO5VD8mrqqsCQAEMMv7UA.gif" data-width="1280" data-height="624" src="https://cdn-images-1.medium.com/max/800/1*2JO5VD8mrqqsCQAEMMv7UA.gif"></div></figure><h3 name="aa3e" id="aa3e" class="graf graf--h3 graf-after--figure">How Do I Reduce Startup Time?</h3><ul class="postList"><li name="5322" id="5322" class="graf graf--li graf-after--h3">Multiple time-consuming operations</li><li name="cf0d" id="cf0d" class="graf graf--li graf-after--li">Measure time cost<br>- Time spent between API calls and Player/ PlayerItem status change notifications<br>- <code class="markup--code markup--li-code u-paddingRight0 u-marginRight0">AVPlayerItemAccessLogEvent.<strong class="markup--strong markup--li-strong">startupTime</strong></code><strong class="markup--strong markup--li-strong"> <br></strong>- Time from starting media download to the first <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">isPlaybackLikelyToKeepUp == true</strong></code></li></ul><h3 name="eeea" id="eeea" class="graf graf--h3 graf-after--li">Reduce Startup Time — AVAsset</h3><figure name="420d" id="420d" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 346px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.4%;"></div><img class="graf-image" data-image-id="1*BlTylcqT2rdO5hvh2EzDnw.gif" data-width="1280" data-height="632" src="https://cdn-images-1.medium.com/max/800/1*BlTylcqT2rdO5hvh2EzDnw.gif"></div></figure><h3 name="efab" id="efab" class="graf graf--h3 graf-after--figure">Reduce Startup Time — AVAsset</h3><figure name="3041" id="3041" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 351px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.1%;"></div><img class="graf-image" data-image-id="1*3_GuhdvZv-l0NRICHB6wOw.png" data-width="4358" data-height="2184" src="https://cdn-images-1.medium.com/max/800/1*3_GuhdvZv-l0NRICHB6wOw.png"></div></figure><ul class="postList"><li name="f564" id="f564" class="graf graf--li graf-after--figure">Create and inspect AVAsset before user decides to play</li><li name="011f" id="011f" class="graf graf--li graf-after--li">Prefetch decryption keys<br>- Adopt AVContentKeySession!</li></ul><h3 name="185a" id="185a" class="graf graf--h3 graf-after--li">Reduce Startup Time — AVPlayer and AVPlayerItem</h3><ul class="postList"><li name="3ea3" id="3ea3" class="graf graf--li graf-after--h3">Set up AVPlayerItem before buffering</li><li name="bf79" id="bf79" class="graf graf--li graf-after--li">Set AVPlayer rate before setting player item</li></ul><figure name="685d" id="685d" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 346px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.5%;"></div><img class="graf-image" data-image-id="1*GtKSzazFVEG_WSMryHhMUw.gif" data-width="1280" data-height="633" src="https://cdn-images-1.medium.com/max/800/1*GtKSzazFVEG_WSMryHhMUw.gif"></div></figure><figure name="c78d" id="c78d" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 246px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.199999999999996%;"></div><img class="graf-image" data-image-id="1*5bxuGjTZW-yETmIDf_SIGQ.gif" data-width="1280" data-height="450" src="https://cdn-images-1.medium.com/max/800/1*5bxuGjTZW-yETmIDf_SIGQ.gif"></div></figure><h3 name="3989" id="3989" class="graf graf--h3 graf-after--figure">Reduce Startup Time — AVPlayerItem Transition</h3><ul class="postList"><li name="afcb" id="afcb" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Use AVQueuePlayer to play multiple items</strong></li><li name="3438" id="3438" class="graf graf--li graf-after--li">Enqueue second AVPlayerItem well in advance</li></ul><figure name="f1c1" id="f1c1" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 224px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 32%;"></div><img class="graf-image" data-image-id="1*FqoSyMTLeDUEd4gYBjP91A.gif" data-width="1280" data-height="410" src="https://cdn-images-1.medium.com/max/800/1*FqoSyMTLeDUEd4gYBjP91A.gif"></div></figure><h3 name="5843" id="5843" class="graf graf--h3 graf-after--figure">What Determines Network Buffering Time?</h3><ul class="postList"><li name="39c2" id="39c2" class="graf graf--li graf-after--h3">Choice of variant</li><li name="fb75" id="fb75" class="graf graf--li graf-after--li">Content bitrate</li><li name="3d77" id="3d77" class="graf graf--li graf-after--li">Playlist target duration</li><li name="8dfb" id="8dfb" class="graf graf--li graf-after--li">Network bandwidth</li></ul><h3 name="cf29" id="cf29" class="graf graf--h3 graf-after--li">Network Buffering Time — Typical Case</h3><figure name="a164" id="a164" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 311px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.4%;"></div><img class="graf-image" data-image-id="1*A4GbJ9UkRYYkESdoP_z3Iw.png" data-width="4408" data-height="1958" src="https://cdn-images-1.medium.com/max/800/1*A4GbJ9UkRYYkESdoP_z3Iw.png"></div></figure><h3 name="c2b2" id="c2b2" class="graf graf--h3 graf-after--figure">Network Buffering Time — Download Slower Than 1x</h3><figure name="0dd1" id="0dd1" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 310px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.3%;"></div><img class="graf-image" data-image-id="1*1thu4ZmBDoqGNJGFD4Yqcg.png" data-width="4406" data-height="1952" src="https://cdn-images-1.medium.com/max/800/1*1thu4ZmBDoqGNJGFD4Yqcg.png"></div></figure><h3 name="ae9d" id="ae9d" class="graf graf--h3 graf-after--figure">Network Buffering Time — Initial Variant Choice</h3><figure name="00b0" id="00b0" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 311px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.4%;"></div><img class="graf-image" data-image-id="1*90lrieVOlcqLZJeihwo7TQ.png" data-width="4406" data-height="1956" src="https://cdn-images-1.medium.com/max/800/1*90lrieVOlcqLZJeihwo7TQ.png"></div></figure><h3 name="02b8" id="02b8" class="graf graf--h3 graf-after--figure">Reducing Network Buffering Time</h3><ul class="postList"><li name="3f4e" id="3f4e" class="graf graf--li graf-after--h3">Wise choice of initial variant<br>- Lower content bitrate means shorter buffering time for startup<br><strong class="markup--strong markup--li-strong">- But it’s a<em class="markup--em markup--li-em"> trade off </em>of initial video quality 🤔</strong></li><li name="c7fc" id="c7fc" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Be mindful of all media format<br>- Consider initial variant for each flavor of media format<br>- HDR / SDR, HEVC / H.264, Stereo / DD / DD+</em></strong></li></ul><h3 name="5543" id="5543" class="graf graf--h3 graf-after--li">Why Does the Playback Stall ?</h3><ul class="postList"><li name="8125" id="8125" class="graf graf--li graf-after--h3">Stalls can happen !</li><li name="e228" id="e228" class="graf graf--li graf-after--li">How to investigate stalls</li><li name="4626" id="4626" class="graf graf--li graf-after--li">How to avoid stalls</li></ul><h3 name="84bd" id="84bd" class="graf graf--h3 graf-after--li">Stall Investigation</h3><ul class="postList"><li name="59b2" id="59b2" class="graf graf--li graf-after--h3">Listen to stall notifications</li></ul><figure name="e51b" id="e51b" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 140px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20%;"></div><img class="graf-image" data-image-id="1*X9t58KHLFltL8tC8qTUcTg.png" data-width="2564" data-height="514" src="https://cdn-images-1.medium.com/max/800/1*X9t58KHLFltL8tC8qTUcTg.png"></div></figure><ul class="postList"><li name="d2c3" id="d2c3" class="graf graf--li graf-after--figure">Check <code class="markup--code markup--li-code">AVPlayerItem</code> status</li></ul><figure name="f54d" id="f54d" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 61px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 8.7%;"></div><img class="graf-image" data-image-id="1*xgIkA-PiO8u8zyaJuR9tEw.png" data-width="1872" data-height="162" src="https://cdn-images-1.medium.com/max/800/1*xgIkA-PiO8u8zyaJuR9tEw.png"></div></figure><ul class="postList"><li name="7876" id="7876" class="graf graf--li graf-after--figure"><code class="markup--code markup--li-code u-paddingRight0 u-marginRight0"><strong class="markup--strong markup--li-strong">AVPlayerItem<em class="markup--em markup--li-em">ErrorLog</em></strong></code></li><li name="48a0" id="48a0" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code u-paddingRight0 u-marginRight0"><strong class="markup--strong markup--li-strong">AVPlayerItem<em class="markup--em markup--li-em">AccessLog</em></strong></code></li></ul><figure name="dcd4" id="dcd4" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 322px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.1%;"></div><img class="graf-image" data-image-id="1*qBr2ZMgDS5xzszuilOMNcw.png" data-width="4428" data-height="2040" src="https://cdn-images-1.medium.com/max/800/1*qBr2ZMgDS5xzszuilOMNcw.png"></div></figure><h3 name="5c75" id="5c75" class="graf graf--h3 graf-after--figure">Reducing Stalls — <strong class="markup--strong markup--h3-strong">Dealing With Variable Networks</strong></h3><p name="2789" id="2789" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Provide a full set of bit rate tiers</strong></p><ul class="postList"><li name="6fe0" id="6fe0" class="graf graf--li graf-after--p"><em class="markup--em markup--li-em">Each codec combination needs its own set of tiers</em></li></ul><h3 name="4bac" id="4bac" class="graf graf--h3 graf-after--li">Reducing Stalls — Dealing With Variable Networks</h3><p name="b29d" id="b29d" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Your content server and CDN must</strong></p><ul class="postList"><li name="3474" id="3474" class="graf graf--li graf-after--p">Deliver media playlists, segments, and keys without delay</li><li name="ffcf" id="ffcf" class="graf graf--li graf-after--li">Update live playlists at least every target duration</li><li name="362f" id="362f" class="graf graf--li graf-after--li">Synchronize discontinuity sequence numbers between playlists</li><li name="753f" id="753f" class="graf graf--li graf-after--li">Indicate server-side failure clearly</li></ul><h3 name="f445" id="f445" class="graf graf--h3 graf-after--li">How to Investigate Errors</h3><ul class="postList"><li name="ba34" id="ba34" class="graf graf--li graf-after--h3">Error and access logs</li><li name="118f" id="118f" class="graf graf--li graf-after--li">Error properties</li><li name="12c5" id="12c5" class="graf graf--li graf-after--li">Media validation</li></ul><h3 name="a3f0" id="a3f0" class="graf graf--h3 graf-after--li">Streaming Errors — AVPlayerItemErrorLog</h3><ul class="postList"><li name="7f97" id="7f97" class="graf graf--li graf-after--h3">Can be triggered by problems with the network or content format</li><li name="836f" id="836f" class="graf graf--li graf-after--li">May be nonfatal</li><li name="8de5" id="8de5" class="graf graf--li graf-after--li">Details are in the error comments</li></ul><figure name="5e28" id="5e28" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 237px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.900000000000006%;"></div><img class="graf-image" data-image-id="1*wdwV3aI3_dC4w2FlqdU8-w.png" data-width="4685" data-height="1589" src="https://cdn-images-1.medium.com/max/800/1*wdwV3aI3_dC4w2FlqdU8-w.png"></div></figure><h3 name="0938" id="0938" class="graf graf--h3 graf-after--figure">Streaming Errors — AVPlayer, AVPlayerItem</h3><ul class="postList"><li name="6c78" id="6c78" class="graf graf--li graf-after--h3">Observe <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">AVPlayerItem.status</strong></code> and <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">AVPlayerItem.error</strong></code></li><li name="4a33" id="4a33" class="graf graf--li graf-after--li"><code class="markup--code markup--li-code">AVPlayerItem</code> errors end playback, remove item from player queue</li></ul><figure name="c3c5" id="c3c5" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 290px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.4%;"></div><img class="graf-image" data-image-id="1*iPQaiozqr8-1lL6b7RAOmg.png" data-width="4314" data-height="1786" src="https://cdn-images-1.medium.com/max/800/1*iPQaiozqr8-1lL6b7RAOmg.png"></div></figure><figure name="57ab" id="57ab" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 237px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.800000000000004%;"></div><img class="graf-image" data-image-id="1*Gdu8tMPrO63uIxn_qwCCzA.png" data-width="4378" data-height="1480" src="https://cdn-images-1.medium.com/max/800/1*Gdu8tMPrO63uIxn_qwCCzA.png"></div></figure><figure name="7f19" id="7f19" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 234px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 33.5%;"></div><img class="graf-image" data-image-id="1*416N48KPtIL_syn_2sk4qQ.png" data-width="3948" data-height="1322" src="https://cdn-images-1.medium.com/max/800/1*416N48KPtIL_syn_2sk4qQ.png"></div></figure><h3 name="2bf3" id="2bf3" class="graf graf--h3 graf-after--figure">Streaming Errors — HDCP</h3><ul class="postList"><li name="6190" id="6190" class="graf graf--li graf-after--h3">Current item requires external protection</li><li name="a19d" id="a19d" class="graf graf--li graf-after--li">Device does not meet protection level</li><li name="04eb" id="04eb" class="graf graf--li graf-after--li">User observes video loss</li><li name="2df0" id="2df0" class="graf graf--li graf-after--li">Have a variant which doesn’t require HDCP protection</li><li name="86a8" id="86a8" class="graf graf--li graf-after--li">App UI should reflect property value changes</li></ul><figure name="c0c2" id="c0c2" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 47px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 6.7%;"></div><img class="graf-image" data-image-id="1*htiKo7evqcBNNE7euEAfOw.png" data-width="3108" data-height="208" src="https://cdn-images-1.medium.com/max/800/1*htiKo7evqcBNNE7euEAfOw.png"></div></figure><h3 name="5a5b" id="5a5b" class="graf graf--h3 graf-after--figure">Streaming Error — Media Validation</h3><ul class="postList"><li name="55b5" id="55b5" class="graf graf--li graf-after--h3">Media stream validator</li><li name="2dba" id="2dba" class="graf graf--li graf-after--li">Available on developer website</li></ul><h3 name="b39e" id="b39e" class="graf graf--h3 graf-after--li">Master PlayLists</h3><p name="b0a6" id="b0a6" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">How do I make sure the player chooses the right stream?</strong></p><figure name="64f2" id="64f2" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 297px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.4%;"></div><img class="graf-image" data-image-id="1*MpBKDYBH82Na3GRwZwVAMw.png" data-width="3662" data-height="1554" src="https://cdn-images-1.medium.com/max/800/1*MpBKDYBH82Na3GRwZwVAMw.png"></div><figcaption class="imageCaption">Poor logs 😡</figcaption></figure><h3 name="5055" id="5055" class="graf graf--h3 graf-after--figure">Attributes For Variants</h3><p name="795f" id="795f" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">EXT-X-STREAM-INF tag</strong></p><figure name="7e9f" id="7e9f" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 286px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.9%;"></div><img class="graf-image" data-image-id="1*9HwVzq05XKRvzyIn7gDViA.png" data-width="4346" data-height="1776" src="https://cdn-images-1.medium.com/max/800/1*9HwVzq05XKRvzyIn7gDViA.png"></div></figure><figure name="a37d" id="a37d" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 349px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.9%;"></div><img class="graf-image" data-image-id="1*dD3AWr-QS5Oo-EwFTvtxVg.png" data-width="4580" data-height="2286" src="https://cdn-images-1.medium.com/max/800/1*dD3AWr-QS5Oo-EwFTvtxVg.png"></div><figcaption class="imageCaption">Rich logs 😆</figcaption></figure><h3 name="d26a" id="d26a" class="graf graf--h3 graf-after--figure">Why don’t I see images in fast-forward or in the Apple TV scrubber bar ?</h3><figure name="150e" id="150e" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 383px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 54.7%;"></div><img class="graf-image" data-image-id="1*1Qv9WGMQYz0IcRg9hJ3Keg.png" data-width="4324" data-height="2364" src="https://cdn-images-1.medium.com/max/800/1*1Qv9WGMQYz0IcRg9hJ3Keg.png"></div></figure><h3 name="d105" id="d105" class="graf graf--h3 graf-after--figure">What’s an I-frame?</h3><figure name="ba90" id="ba90" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 295px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.1%;"></div><img class="graf-image" data-image-id="1*qZM0Os1N8nJdavs74JsJUQ.png" data-width="4464" data-height="1880" src="https://cdn-images-1.medium.com/max/800/1*qZM0Os1N8nJdavs74JsJUQ.png"></div></figure><h3 name="fccd" id="fccd" class="graf graf--h3 graf-after--figure">I-frame Video Segments</h3><p name="ba02" id="ba02" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Consist of a single frame</strong></p><figure name="e021" id="e021" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 275px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.2%;"></div><img class="graf-image" data-image-id="1*GLmfzJJdTj0GQlkdtPb9Dg.png" data-width="4302" data-height="1688" src="https://cdn-images-1.medium.com/max/800/1*GLmfzJJdTj0GQlkdtPb9Dg.png"></div></figure><h3 name="de00" id="de00" class="graf graf--h3 graf-after--figure">High Density I-frames</h3><p name="af0d" id="af0d" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Evenly spaced, closer together, better user experience</strong></p><figure name="a2bf" id="a2bf" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 276px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39.4%;"></div><img class="graf-image" data-image-id="1*38aWfRa2Ne-rwM1V667x6Q.png" data-width="4394" data-height="1730" src="https://cdn-images-1.medium.com/max/800/1*38aWfRa2Ne-rwM1V667x6Q.png"></div></figure><figure name="c9f4" id="c9f4" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 327px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.7%;"></div><img class="graf-image" data-image-id="1*RyTyxGU69Qc64PkDkZWmtw.png" data-width="4428" data-height="2068" src="https://cdn-images-1.medium.com/max/800/1*RyTyxGU69Qc64PkDkZWmtw.png"></div></figure><h3 name="382c" id="382c" class="graf graf--h3 graf-after--figure">How do I support multiple languages?</h3><figure name="c978" id="c978" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 256px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.5%;"></div><img class="graf-image" data-image-id="1*424hZ1VMTL6xz18VVsEzdw.png" data-width="4418" data-height="1614" src="https://cdn-images-1.medium.com/max/800/1*424hZ1VMTL6xz18VVsEzdw.png"></div><figcaption class="imageCaption">Multiple Languages</figcaption></figure><figure name="1cdf" id="1cdf" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 366px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 52.300000000000004%;"></div><img class="graf-image" data-image-id="1*m4yNq4ThguvnNXB_gqAvkg.png" data-width="4562" data-height="2386" src="https://cdn-images-1.medium.com/max/800/1*m4yNq4ThguvnNXB_gqAvkg.png"></div></figure><h3 name="e991" id="e991" class="graf graf--h3 graf-after--figure">What’s the difference between DEFAULT and AUTOSELECT ? 🤔</h3><ul class="postList"><li name="b08a" id="b08a" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">AUTOSELECT</strong><br>- This rendition can be automatically selected<br>- Generally you want this set to YES<br>- Set to NO for things like a commentary track</li><li name="e5cd" id="e5cd" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">DEFAULT</strong><br>- Player chooses this rendition unless the user chooses something else<br>- Only one member of a group can be <code class="markup--code markup--li-code">DEFAULT = YES</code><br>- Must have <code class="markup--code markup--li-code">AUTOSELECT = YES</code><br>- Has nothing to do with the default variant</li></ul><h3 name="8c93" id="8c93" class="graf graf--h3 graf-after--li">How do I support multichannel audio?</h3><figure name="6aa4" id="6aa4" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 261px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 37.2%;"></div><img class="graf-image" data-image-id="1*MTJQXL5iiohy3T8qKFyHIw.png" data-width="4412" data-height="1642" src="https://cdn-images-1.medium.com/max/800/1*MTJQXL5iiohy3T8qKFyHIw.png"></div><figcaption class="imageCaption">Multichannel Audio</figcaption></figure><figure name="e5b1" id="e5b1" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 375px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 53.6%;"></div><img class="graf-image" data-image-id="1*KGGffpW2qoTn5KtxwEf52g.png" data-width="4478" data-height="2402" src="https://cdn-images-1.medium.com/max/800/1*KGGffpW2qoTn5KtxwEf52g.png"></div></figure><h3 name="79cd" id="79cd" class="graf graf--h3 graf-after--figure">How do I support several audio bit rates ?</h3><figure name="d976" id="d976" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 347px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.5%;"></div><img class="graf-image" data-image-id="1*9i6XDBOChWHwVI_lTNKMMw.png" data-width="4624" data-height="2290" src="https://cdn-images-1.medium.com/max/800/1*9i6XDBOChWHwVI_lTNKMMw.png"></div></figure><figure name="c351" id="c351" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 335px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 47.8%;"></div><img class="graf-image" data-image-id="1*oJ_M30KH-bfXrQ5wAQyI3g.png" data-width="4460" data-height="2134" src="https://cdn-images-1.medium.com/max/800/1*oJ_M30KH-bfXrQ5wAQyI3g.png"></div></figure><h3 name="c021" id="c021" class="graf graf--h3 graf-after--figure">How do I want HEVC or Dolby Vision ?</h3><figure name="427f" id="427f" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 265px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 37.9%;"></div><img class="graf-image" data-image-id="1*xEbgXRH0VSh7mLcw_MaznA.png" data-width="4390" data-height="1662" src="https://cdn-images-1.medium.com/max/800/1*xEbgXRH0VSh7mLcw_MaznA.png"></div><figcaption class="imageCaption">Don’t skimp on variants</figcaption></figure><figure name="a8c2" id="a8c2" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 321px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.800000000000004%;"></div><img class="graf-image" data-image-id="1*xAQb_EtC-WiKvI5AmcqSWg.png" data-width="4468" data-height="2046" src="https://cdn-images-1.medium.com/max/800/1*xAQb_EtC-WiKvI5AmcqSWg.png"></div></figure><h3 name="33fe" id="33fe" class="graf graf--h3 graf-after--figure">How do I handle subtitles ?</h3><figure name="8d66" id="8d66" class="graf graf--figure graf-after--h3 graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 371px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 53%;"></div><img class="graf-image" data-image-id="1*sRK33TkNSB4R2_YU1H3elQ.png" data-width="4518" data-height="2394" src="https://cdn-images-1.medium.com/max/800/1*sRK33TkNSB4R2_YU1H3elQ.png"></div></figure></div></div></section>
</section>