---
layout: post
title:  "Core Data Best Practices"
subtitle: "WWDC 2018"
date:   2018-07-20 20:23:33 -0000
background: '/img/posts/wwdc18.png'
---





<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Core Data Best Practices</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Core Data Best Practices</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="2a30" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8904" id="8904" class="graf graf--h3 graf--leading graf--title">Core Data Best Practices</h3><h4 name="e005" id="e005" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/224/" data-href="https://developer.apple.com/videos/play/wwdc2018/224/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">WWDC 2018</a></h4><h3 name="1f41" id="1f41" class="graf graf--h3 graf-after--h4">Core Data Manages Persistence</h3><figure name="509e" id="509e" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 368px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 52.6%;"></div><img class="graf-image" data-image-id="1*xUNCQSENNxfoS4Iu7bMGpw.png" data-width="2819" data-height="1484" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*xUNCQSENNxfoS4Iu7bMGpw.png"></div></figure><figure name="c284" id="c284" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 738px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 105.5%;"></div><img class="graf-image" data-image-id="1*Fp3rECogidRbKuhF-ekCQA.png" data-width="3337" data-height="3520" src="https://cdn-images-1.medium.com/max/800/1*Fp3rECogidRbKuhF-ekCQA.png"></div></figure><h3 name="1be7" id="1be7" class="graf graf--h3 graf-after--figure">How the container Finds Models</h3><figure name="e34f" id="e34f" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 342px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.9%;"></div><img class="graf-image" data-image-id="1*ie2DJt9ew77rjBzEjkIKyg.png" data-width="1844" data-height="901" src="https://cdn-images-1.medium.com/max/800/1*ie2DJt9ew77rjBzEjkIKyg.png"></div></figure><figure name="12be" id="12be" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 217px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 31%;"></div><img class="graf-image" data-image-id="1*u4nAw-Cn9Z9n8Z2eoUb1gQ.png" data-width="3429" data-height="1064" src="https://cdn-images-1.medium.com/max/800/1*u4nAw-Cn9Z9n8Z2eoUb1gQ.png"></div></figure><h3 name="6bed" id="6bed" class="graf graf--h3 graf-after--figure">More Container Tricks</h3><figure name="9dc7" id="9dc7" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 342px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.8%;"></div><img class="graf-image" data-image-id="1*viIF72-G7e_w3BUJi7jpRg.png" data-width="1216" data-height="594" src="https://cdn-images-1.medium.com/max/800/1*viIF72-G7e_w3BUJi7jpRg.png"></div></figure><figure name="c794" id="c794" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 83px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 11.799999999999999%;"></div><img class="graf-image" data-image-id="1*v9r2nwgeiLHa_qSOcGdiWQ.png" data-width="3328" data-height="394" src="https://cdn-images-1.medium.com/max/800/1*v9r2nwgeiLHa_qSOcGdiWQ.png"></div><figcaption class="imageCaption">Customizing where stores are stored</figcaption></figure><h3 name="d760" id="d760" class="graf graf--h3 graf-after--figure">Generalizing Controllers</h3><ul class="postList"><li name="6ee1" id="6ee1" class="graf graf--li graf-after--h3">Getting view controllers what they need when using</li></ul><figure name="0e5b" id="0e5b" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 158px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 22.6%;"></div><img class="graf-image" data-image-id="1*PMt9NSxbn7LniLY5-v4Dog.png" data-width="3324" data-height="751" src="https://cdn-images-1.medium.com/max/800/1*PMt9NSxbn7LniLY5-v4Dog.png"></div></figure><figure name="1a38" id="1a38" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 133px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 19%;"></div><img class="graf-image" data-image-id="1*RPTKZI0ReGMOnZRlLQPF2g.png" data-width="3304" data-height="628" src="https://cdn-images-1.medium.com/max/800/1*RPTKZI0ReGMOnZRlLQPF2g.png"></div></figure><figure name="7b0c" id="7b0c" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 152px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 21.7%;"></div><img class="graf-image" data-image-id="1*Qx47JEbbPKIfTlJeCjJHUw.png" data-width="3293" data-height="713" src="https://cdn-images-1.medium.com/max/800/1*Qx47JEbbPKIfTlJeCjJHUw.png"></div></figure><h3 name="446a" id="446a" class="graf graf--h3 graf-after--figure">Matching UIs to the Model</h3><figure name="e9e2" id="e9e2" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 248px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.4%;"></div><img class="graf-image" data-image-id="1*bIXMd4qgCq2GhjmoMis29w.png" data-width="3309" data-height="1171" src="https://cdn-images-1.medium.com/max/800/1*bIXMd4qgCq2GhjmoMis29w.png"></div></figure><figure name="9e20" id="9e20" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 98px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 14.000000000000002%;"></div><img class="graf-image" data-image-id="1*b4Uy9XkIFlcJKHV-PZvGcw.png" data-width="3320" data-height="464" src="https://cdn-images-1.medium.com/max/800/1*b4Uy9XkIFlcJKHV-PZvGcw.png"></div></figure><h4 name="fb6f" id="fb6f" class="graf graf--h4 graf-after--figure">Managed Object ContextWillSave Notification</h4><ul class="postList"><li name="2618" id="2618" class="graf graf--li graf-after--h4">Posts that have been inserted/ deleted</li></ul><figure name="9d51" id="9d51" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 296px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.3%;"></div><img class="graf-image" data-image-id="1*IPWS-OoE9C-lgvG5z1BdNA.png" data-width="3398" data-height="1438" src="https://cdn-images-1.medium.com/max/800/1*IPWS-OoE9C-lgvG5z1BdNA.png"></div></figure><h3 name="9876" id="9876" class="graf graf--h3 graf-after--figure">Managing Growth</h3><ul class="postList"><li name="c98a" id="c98a" class="graf graf--li graf-after--h3">More complecated → Chaos → Bad UX</li><li name="0027" id="0027" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Query generations</strong> helps you</li></ul><figure name="993b" id="993b" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 671px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 95.89999999999999%;"></div><img class="graf-image" data-image-id="1*9wAMTh-wvHk3zVDRx2vB1A.gif" data-width="749" data-height="718" src="https://cdn-images-1.medium.com/max/800/1*9wAMTh-wvHk3zVDRx2vB1A.gif"></div><figcaption class="imageCaption">Chaos</figcaption></figure><h3 name="543f" id="543f" class="graf graf--h3 graf-after--figure">Query generations (WWDC 2016)</h3><ul class="postList"><li name="8aec" id="8aec" class="graf graf--li graf-after--h3">Isolate contexts from completing work</li><li name="7ccb" id="7ccb" class="graf graf--li graf-after--li">Provide a consistent, durable view of the database</li><li name="9f49" id="9f49" class="graf graf--li graf-after--li">Requires WAL journal mode</li></ul><figure name="76d8" id="76d8" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 306px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.7%;"></div><img class="graf-image" data-image-id="1*ZzviSaaSO9SZpTL7b3Wz2w.png" data-width="3470" data-height="1517" src="https://cdn-images-1.medium.com/max/800/1*ZzviSaaSO9SZpTL7b3Wz2w.png"></div></figure><figure name="cfe4" id="cfe4" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 638px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 91.10000000000001%;"></div><img class="graf-image" data-image-id="1*u1vRGvnpzOG6UzA-vYPWFg.gif" data-width="790" data-height="720" src="https://cdn-images-1.medium.com/max/800/1*u1vRGvnpzOG6UzA-vYPWFg.gif"></div><figcaption class="imageCaption">Synchronized</figcaption></figure><h3 name="a740" id="a740" class="graf graf--h3 graf-after--figure">Filtering Updates with Persistent History Tracking</h3><ul class="postList"><li name="2893" id="2893" class="graf graf--li graf-after--h3">New in iOS 11 and macOS 10.13</li><li name="1127" id="1127" class="graf graf--li graf-after--li">Persisted record of each transaction</li></ul><figure name="9174" id="9174" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 304px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.5%;"></div><img class="graf-image" data-image-id="1*SouyAYSVSBLptoXnuxjsxg.png" data-width="3303" data-height="1436" src="https://cdn-images-1.medium.com/max/800/1*SouyAYSVSBLptoXnuxjsxg.png"></div></figure><figure name="3e1e" id="3e1e" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 454px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 64.9%;"></div><img class="graf-image" data-image-id="1*IleR01IjCg-85tOMIrVZeQ.png" data-width="3418" data-height="2219" src="https://cdn-images-1.medium.com/max/800/1*IleR01IjCg-85tOMIrVZeQ.png"></div></figure><figure name="bb43" id="bb43" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 540px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 77.10000000000001%;"></div><img class="graf-image" data-image-id="1*owSeZc_omLFb4y0prAseXg.png" data-width="2463" data-height="1900" src="https://cdn-images-1.medium.com/max/800/1*owSeZc_omLFb4y0prAseXg.png"></div></figure><h3 name="5c2e" id="5c2e" class="graf graf--h3 graf-after--figure">Bulk Editing with Batch Operations</h3><figure name="9026" id="9026" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 357px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 51%;"></div><img class="graf-image" data-image-id="1*5FdakRDahjHSP7rJKa8QAw.png" data-width="4010" data-height="2046" src="https://cdn-images-1.medium.com/max/800/1*5FdakRDahjHSP7rJKa8QAw.png"></div></figure><h3 name="fa53" id="fa53" class="graf graf--h3 graf-after--figure">NSManagedObject.delete vs NSBatchDeleteRequest</h3><figure name="79cc" id="79cc" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 328px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.9%;"></div><img class="graf-image" data-image-id="1*mwAZNa3BB_8D76r8c843eA.png" data-width="3223" data-height="1510" src="https://cdn-images-1.medium.com/max/800/1*mwAZNa3BB_8D76r8c843eA.png"></div></figure><figure name="acef" id="acef" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 316px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.2%;"></div><img class="graf-image" data-image-id="1*7ckf5cXNyYj8bCFdVPetLg.png" data-width="3061" data-height="1383" src="https://cdn-images-1.medium.com/max/800/1*7ckf5cXNyYj8bCFdVPetLg.png"></div></figure><h3 name="43ed" id="43ed" class="graf graf--h3 graf-after--figure">Adopt NSSecureUnarchiveFromDataTransformerName</h3><ul class="postList"><li name="5b4c" id="5b4c" class="graf graf--li graf-after--h3">Old — nil or NSKeyedUnarchiveFromDataTrasnformerName</li><li name="3f2c" id="3f2c" class="graf graf--li graf-after--li">New — NSSecureUnarchiveFromDataTransformerName</li></ul><figure name="269b" id="269b" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 434px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.1%;"></div><img class="graf-image" data-image-id="1*wROatWjciCmorv9YNhBu4w.png" data-width="2538" data-height="1575" src="https://cdn-images-1.medium.com/max/800/1*wROatWjciCmorv9YNhBu4w.png"></div></figure><figure name="5c02" id="5c02" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 83px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 11.799999999999999%;"></div><img class="graf-image" data-image-id="1*YfY6_b68J70-AGLrKZ4OfA.png" data-width="3274" data-height="386" src="https://cdn-images-1.medium.com/max/800/1*YfY6_b68J70-AGLrKZ4OfA.png"></div></figure><h3 name="9817" id="9817" class="graf graf--h3 graf-after--figure">Transparent for plist types</h3><ul class="postList"><li name="08cc" id="08cc" class="graf graf--li graf-after--h3">Custom classes need a custom transformer</li></ul><h3 name="706f" id="706f" class="graf graf--h3 graf-after--li">CoreData Debug Log</h3><figure name="b828" id="b828" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 432px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.8%;"></div><img class="graf-image" data-image-id="1*D1G2QPFIk7JgLt3G7vdDrg.png" data-width="2736" data-height="1690" src="https://cdn-images-1.medium.com/max/800/1*D1G2QPFIk7JgLt3G7vdDrg.png"></div></figure><figure name="3e0b" id="3e0b" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 282px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 40.300000000000004%;"></div><img class="graf-image" data-image-id="1*wbdmdmFVTJqOhgaXk6Lpmw.png" data-width="3324" data-height="1339" src="https://cdn-images-1.medium.com/max/800/1*wbdmdmFVTJqOhgaXk6Lpmw.png"></div></figure><figure name="825c" id="825c" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 243px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.8%;"></div><img class="graf-image" data-image-id="1*X4zzG4GEbevl3atSgd6fAw.png" data-width="3309" data-height="1150" src="https://cdn-images-1.medium.com/max/800/1*X4zzG4GEbevl3atSgd6fAw.png"></div></figure><h3 name="f281" id="f281" class="graf graf--h3 graf-after--figure">Performance Analysis with sqlite3</h3><figure name="9529" id="9529" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 432px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.6%;"></div><img class="graf-image" data-image-id="1*0Jbe9so-O-Os3aAcDizkpg.png" data-width="2576" data-height="1588" src="https://cdn-images-1.medium.com/max/800/1*0Jbe9so-O-Os3aAcDizkpg.png"></div></figure><figure name="ea41" id="ea41" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 155px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 22.2%;"></div><img class="graf-image" data-image-id="1*KLU2WjiQC8M3lmzSbV6HWQ.png" data-width="3304" data-height="733" src="https://cdn-images-1.medium.com/max/800/1*KLU2WjiQC8M3lmzSbV6HWQ.png"></div></figure></div></div></section><section name="5386" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="0aac" id="0aac" class="graf graf--h3 graf--leading">Better Indexing</h3><figure name="3ab9" id="3ab9" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 348px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.7%;"></div><img class="graf-image" data-image-id="1*KpTZR0QBU2BEUOWCHAhvPw.png" data-width="3276" data-height="1629" src="https://cdn-images-1.medium.com/max/800/1*KpTZR0QBU2BEUOWCHAhvPw.png"></div></figure><figure name="7ce4" id="7ce4" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 167px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 23.9%;"></div><img class="graf-image" data-image-id="1*3I-rdr9l2wnKWDfNy33FyA.png" data-width="3283" data-height="783" src="https://cdn-images-1.medium.com/max/800/1*3I-rdr9l2wnKWDfNy33FyA.png"></div></figure><figure name="0231" id="0231" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 555px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 79.3%;"></div><img class="graf-image" data-image-id="1*ELMxefJUvr5VZhi5jqypQg.png" data-width="3312" data-height="2625" src="https://cdn-images-1.medium.com/max/800/1*ELMxefJUvr5VZhi5jqypQg.png"></div></figure><h3 name="b112" id="b112" class="graf graf--h3 graf-after--figure">Testing With CoreData</h3><figure name="2569" id="2569" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 321px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.9%;"></div><img class="graf-image" data-image-id="1*dQPTHgMZJHmQQ2pmXJNBtQ.png" data-width="3293" data-height="1512" src="https://cdn-images-1.medium.com/max/800/1*dQPTHgMZJHmQQ2pmXJNBtQ.png"></div></figure><figure name="b4a7" id="b4a7" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 208px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 29.7%;"></div><img class="graf-image" data-image-id="1*wDONAWpwb2bJZ7UjvOYfag.png" data-width="3265" data-height="969" src="https://cdn-images-1.medium.com/max/800/1*wDONAWpwb2bJZ7UjvOYfag.png"></div></figure><figure name="cb93" id="cb93" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 349px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 49.8%;"></div><img class="graf-image" data-image-id="1*gWHdlAGRtbOWyYiwkBssaw.png" data-width="3341" data-height="1664" src="https://cdn-images-1.medium.com/max/800/1*gWHdlAGRtbOWyYiwkBssaw.png"></div></figure><figure name="3100" id="3100" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 309px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.2%;"></div><img class="graf-image" data-image-id="1*BAVCtG_22koq2WmZG2ScZA.png" data-width="3393" data-height="1499" src="https://cdn-images-1.medium.com/max/800/1*BAVCtG_22koq2WmZG2ScZA.png"></div></figure></div></div></section>
</section>