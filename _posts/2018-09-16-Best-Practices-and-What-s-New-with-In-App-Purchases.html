---
layout: post
title:  "Best Practices and What’s New with In-App Purchases"
subtitle: "WWDC 2018"
date:   2018-09-16 07:59:15 -0000
background: '/img/posts/wwdc18.png'
---





<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Best Practices and What’s New with In-App Purchases</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Best Practices and What’s New with In-App Purchases</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="8261" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="fef6" id="fef6" class="graf graf--h3 graf--leading graf--title">Best Practices and What’s New with In-App Purchases</h3><h4 name="a7e5" id="a7e5" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/704/" data-href="https://developer.apple.com/videos/play/wwdc2018/704/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--h4-strong">WWDC 2018</strong></a></h4><h3 name="d2ea" id="d2ea" class="graf graf--h3 graf-after--h4">Introductory Pricing</h3><ul class="postList"><li name="17d5" id="17d5" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">1 time discount for new subscribers</strong></li><li name="1313" id="1313" class="graf graf--li graf-after--li">1 per subscription</li><li name="105a" id="105a" class="graf graf--li graf-after--li">Automatically applied by App Store</li><li name="cc56" id="cc56" class="graf graf--li graf-after--li">Eligibility based on subscription group</li><li name="1e6e" id="1e6e" class="graf graf--li graf-after--li">Reflects data from App Store Connect</li><li name="f05c" id="f05c" class="graf graf--li graf-after--li">Used to format and display UI</li><li name="7e74" id="7e74" class="graf graf--li graf-after--li">Used to determine eligibility</li></ul><figure name="1432" id="1432" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 701px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 100.1%;"></div><img class="graf-image" data-image-id="1*x-lxJMYindK9DD-OA6EHLg.png" data-width="1734" data-height="1736" src="https://cdn-images-1.medium.com/max/800/1*x-lxJMYindK9DD-OA6EHLg.png"></div></figure><figure name="2426" id="2426" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 416px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 59.4%;"></div><img class="graf-image" data-image-id="1*AnRI6K_kXNe4pCmsIg7k2g.png" data-width="3155" data-height="1873" src="https://cdn-images-1.medium.com/max/800/1*AnRI6K_kXNe4pCmsIg7k2g.png"></div></figure><figure name="0a07" id="0a07" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 272px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 38.800000000000004%;"></div><img class="graf-image" data-image-id="1*eoRRamxhIEMkkgUkuEWAFw.png" data-width="3060" data-height="1188" src="https://cdn-images-1.medium.com/max/800/1*eoRRamxhIEMkkgUkuEWAFw.png"></div><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">.payAsYouGo</strong></figcaption></figure><figure name="9e1e" id="9e1e" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 268px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 38.2%;"></div><img class="graf-image" data-image-id="1*9xVx_PSc3FSOKQ9vA2WYuQ.png" data-width="3066" data-height="1172" src="https://cdn-images-1.medium.com/max/800/1*9xVx_PSc3FSOKQ9vA2WYuQ.png"></div><figcaption class="imageCaption"><strong class="markup--strong markup--figure-strong">.payUpFront</strong></figcaption></figure><h3 name="d149" id="d149" class="graf graf--h3 graf-after--figure">Introductory Pricing</h3><ul class="postList"><li name="39f0" id="39f0" class="graf graf--li graf-after--h3">New in iOS 11.2 and macOS 10.13.2</li></ul><figure name="566a" id="566a" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 27px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 3.9%;"></div><img class="graf-image" data-image-id="1*FFQhkSa203tXSjcHHrRYNQ.png" data-width="3016" data-height="118" src="https://cdn-images-1.medium.com/max/800/1*FFQhkSa203tXSjcHHrRYNQ.png"></div></figure><ul class="postList"><li name="ec79" id="ec79" class="graf graf--li graf-after--figure">New in iOS 12 and macOS 10.14<br>- Introductory Pricing eligibility is based on subscription group<br>- 1 introductory price per user for each group</li></ul><figure name="8636" id="8636" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 26px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 3.6999999999999997%;"></div><img class="graf-image" data-image-id="1*DmedK5Fv_FnlUcWQP2LtYQ.png" data-width="3020" data-height="112" src="https://cdn-images-1.medium.com/max/800/1*DmedK5Fv_FnlUcWQP2LtYQ.png"></div></figure><h3 name="61a2" id="61a2" class="graf graf--h3 graf-after--figure">Free Trials for Non-Subscription Apps (new)</h3><p name="67da" id="67da" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Try before you buy</strong></p><ul class="postList"><li name="7ce8" id="7ce8" class="graf graf--li graf-after--p">Non-subscription apps can now offer a free trial</li><li name="5637" id="5637" class="graf graf--li graf-after--li">Free app with non-consumable in-app purchase to unlock</li><li name="d12a" id="d12a" class="graf graf--li graf-after--li">Trial Period: Use non-consumable in-app purchase at price tier 0<br>- Naming convention: <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">14-day Trial</em></strong></li><li name="9afa" id="9afa" class="graf graf--li graf-after--li">Clearly inform customers<br>- Duration of trial<br>- Cost to unlock full functionality<br><strong class="markup--strong markup--li-strong">- Features or content lost when trial ends</strong></li></ul><h3 name="a47c" id="a47c" class="graf graf--h3 graf-after--li">Asking for Ratings and Reviews</h3><h4 name="5f06" id="5f06" class="graf graf--h4 graf-after--h3"><code class="markup--code markup--h4-code"><strong class="markup--strong markup--h4-strong">SKStoreReviewController</strong></code></h4><ul class="postList"><li name="6b12" id="6b12" class="graf graf--li graf-after--h4">Introduced in iOS 10.3</li><li name="a6e0" id="a6e0" class="graf graf--li graf-after--li">Quick way to request a rating / review</li><li name="dab8" id="dab8" class="graf graf--li graf-after--li">Restrictions in place<br>- Limited requests per device<br><strong class="markup--strong markup--li-strong">- Can be disabled by user in Settings</strong></li><li name="b433" id="b433" class="graf graf--li graf-after--li">Strategies for when to request review<br>- Don’t interupt<br>- Wait for a positive experience<br><strong class="markup--strong markup--li-strong">- Track previous requests</strong></li></ul><figure name="3bb8" id="3bb8" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 273px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39%;"></div><img class="graf-image" data-image-id="1*DX6KIOTpG3xWyycdiXRiwA.png" data-width="2230" data-height="870" src="https://cdn-images-1.medium.com/max/800/1*DX6KIOTpG3xWyycdiXRiwA.png"></div></figure><figure name="fbd7" id="fbd7" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 353px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.4%;"></div><img class="graf-image" data-image-id="1*Grne_6_q0yQzCLAPUBpryw.png" data-width="3066" data-height="1544" src="https://cdn-images-1.medium.com/max/800/1*Grne_6_q0yQzCLAPUBpryw.png"></div></figure></div></div></section><section name="4102" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="6068" id="6068" class="graf graf--h4 graf--leading">Deep link to write a review in App Store</h4><ul class="postList"><li name="637f" id="637f" class="graf graf--li graf-after--h4">Introduced in iOS 10.3</li><li name="e198" id="e198" class="graf graf--li graf-after--li">Now supported on macOS</li><li name="1b4e" id="1b4e" class="graf graf--li graf-after--li">Link to open your app in the App Store<br>- Presents compose review from app page</li><li name="712d" id="712d" class="graf graf--li graf-after--li">User-initiated actions<br>- Button in Settings</li><li name="7985" id="7985" class="graf graf--li graf-after--li">URL is formed using regular product URL with an anchor tag</li></ul><figure name="a1ec" id="a1ec" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 46px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 6.5%;"></div><img class="graf-image" data-image-id="1*KjApK3s4RxEQszsVMHuiNQ.png" data-width="2274" data-height="148" src="https://cdn-images-1.medium.com/max/800/1*KjApK3s4RxEQszsVMHuiNQ.png"></div></figure><ul class="postList"><li name="40b8" id="40b8" class="graf graf--li graf-after--figure">For creating product URLs visit<br><a href="https://linkmaker.itunes.apple.com/" data-href="https://linkmaker.itunes.apple.com/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://linkmaker.itunes.apple.com/</a></li></ul><figure name="90b1" id="90b1" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*75OQugZbK_DSEzXfSt706w.png" data-width="2968" data-height="1672" src="https://cdn-images-1.medium.com/max/800/1*75OQugZbK_DSEzXfSt706w.png"></div></figure><h3 name="25d2" id="25d2" class="graf graf--h3 graf-after--figure">The Sandbox</h3><ul class="postList"><li name="2a33" id="2a33" class="graf graf--li graf-after--h3">Environment for testing purchases during development</li><li name="b898" id="b898" class="graf graf--li graf-after--li">Based on certificate used to sign your application</li></ul><figure name="fc12" id="fc12" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 609px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.1%;"></div><img class="graf-image" data-image-id="1*ZURR6SDeuYgZ3Ferm2j9eQ.png" data-width="1516" data-height="1320" src="https://cdn-images-1.medium.com/max/800/1*ZURR6SDeuYgZ3Ferm2j9eQ.png"></div></figure><h3 name="4f79" id="4f79" class="graf graf--h3 graf-after--figure">The Sandbox</h3><p name="135f" id="135f" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Differences</strong></p><ul class="postList"><li name="5f7b" id="5f7b" class="graf graf--li graf-after--p">No charge</li><li name="4bed" id="4bed" class="graf graf--li graf-after--li">Dedicated Sandbox accounts 👍👍👍👍👍</li><li name="8645" id="8645" class="graf graf--li graf-after--li">Backend environment<br>- <a href="https://sandbox.itunes.apple.com/verifyReceipt" data-href="https://sandbox.itunes.apple.com/verifyReceipt" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://sandbox.itunes.apple.com/verifyReceipt</a></li><li name="d9fb" id="d9fb" class="graf graf--li graf-after--li">Test modes<br>- <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">SKReceiptRefreshRequest</strong></code><br>- <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">SKMutablePayment simulatedsAskToBuyInSandbox</strong></code></li><li name="abd0" id="abd0" class="graf graf--li graf-after--li">Time contraction for subscriptions</li></ul><h3 name="e683" id="e683" class="graf graf--h3 graf-after--li">Subscription Timing</h3><p name="9bcb" id="9bcb" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Condensed intervals </strong>👍</p><figure name="f78b" id="f78b" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 444px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 63.4%;"></div><img class="graf-image" data-image-id="1*-EjTOMf8cqNIXgyFqltZfQ.png" data-width="1886" data-height="1196" src="https://cdn-images-1.medium.com/max/800/1*-EjTOMf8cqNIXgyFqltZfQ.png"></div></figure><h3 name="d588" id="d588" class="graf graf--h3 graf-after--figure">The Sandbox</h3><p name="e159" id="e159" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Setting up the test environment </strong>👍👍👍👍👍</p><ul class="postList"><li name="6144" id="6144" class="graf graf--li graf-after--p">Setup in App Store Connect<br>- Create test user<br>- Enter products for sale</li><li name="cee3" id="cee3" class="graf graf--li graf-after--li">Build and sign your app</li><li name="bda7" id="bda7" class="graf graf--li graf-after--li">Buy products<br>- Sign in with test user when prompted</li></ul><figure name="8e9d" id="8e9d" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 619px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 88.4%;"></div><img class="graf-image" data-image-id="1*aeIM37ERadTUKR8Y01duXQ.png" data-width="1930" data-height="1706" src="https://cdn-images-1.medium.com/max/800/1*aeIM37ERadTUKR8Y01duXQ.png"></div></figure><h3 name="7f39" id="7f39" class="graf graf--h3 graf-after--figure">Adding a Transaction Observer</h3><ul class="postList"><li name="4617" id="4617" class="graf graf--li graf-after--h3">Add as early as possible</li><li name="5aa8" id="5aa8" class="graf graf--li graf-after--li">Preferably during<strong class="markup--strong markup--li-strong"> </strong><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">application(_:didFinishLaunchingWithOptions:)</strong></code></li><li name="ea83" id="ea83" class="graf graf--li graf-after--li">Why?<br>- Interrupted buy ( <em class="markup--em markup--li-em">User leaves app , User needs to edit billing info , App crashes</em> )<br>- Subscription renewals<br>- Promoted in-App Purchases<br>- In-App Purchase Promo Codes</li></ul><h3 name="cdfd" id="cdfd" class="graf graf--h3 graf-after--li">Finishing Transactions ⚠️</h3><ul class="postList"><li name="80b9" id="80b9" class="graf graf--li graf-after--h3">Finish downloading hosted content first<br>- Downloads will cancel and become unavailable</li><li name="2fd7" id="2fd7" class="graf graf--li graf-after--li">Verify the receipt before finishing the transaction<br>- consumables will not appear after finished</li></ul><figure name="7439" id="7439" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 311px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.4%;"></div><img class="graf-image" data-image-id="1*kEsEaoVg7a8S154VSTIKjA.png" data-width="3142" data-height="1396" src="https://cdn-images-1.medium.com/max/800/1*kEsEaoVg7a8S154VSTIKjA.png"></div></figure><h3 name="c7ce" id="c7ce" class="graf graf--h3 graf-after--figure">Ask to Buy</h3><figure name="b072" id="b072" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 339px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.4%;"></div><img class="graf-image" data-image-id="1*y54o1xNhUyjGW89Cmsmijw.png" data-width="2986" data-height="1444" src="https://cdn-images-1.medium.com/max/800/1*y54o1xNhUyjGW89Cmsmijw.png"></div></figure><h3 name="be51" id="be51" class="graf graf--h3 graf-after--figure">The Receipt</h3><ul class="postList"><li name="d7fe" id="d7fe" class="graf graf--li graf-after--h3">Trusted record of App an In-App Purchases</li><li name="5820" id="5820" class="graf graf--li graf-after--li">Stored on device</li><li name="7469" id="7469" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Issued by the App Store</strong></li><li name="db09" id="db09" class="graf graf--li graf-after--li">Signed and verifiable</li><li name="48a5" id="48a5" class="graf graf--li graf-after--li">For your app, on that device only</li></ul><h3 name="98a3" id="98a3" class="graf graf--h3 graf-after--li">Receipt Validation</h3><ul class="postList"><li name="357d" id="357d" class="graf graf--li graf-after--h3">On-device vaildation<br>- Unlock features and content within the app</li><li name="092c" id="092c" class="graf graf--li graf-after--li">Server-to-Server validation<br>- Online validation through a request to the App Store<br> <a href="https://buy.itunes.apple.com/verifyReceipt" data-href="https://buy.itunes.apple.com/verifyReceipt" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><em class="markup--em markup--li-em">https://buy.itunes.apple.com/verifyReceipt</em></a><em class="markup--em markup--li-em"><br></em>- <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Unlock</em></strong> features / subscription state on your server</li><li name="c149" id="c149" class="graf graf--li graf-after--li"><a href="https://medium.com/@nilotic2/engineering-subscriptions-190f13b81240" data-href="https://medium.com/@nilotic2/engineering-subscriptions-190f13b81240" class="markup--anchor markup--li-anchor" target="_blank"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Engineering Subscriptions (WWDC 2018)</em></strong></a></li></ul><h3 name="d37c" id="d37c" class="graf graf--h3 graf-after--li">Server-to-Server validation</h3><ul class="postList"><li name="41b7" id="41b7" class="graf graf--li graf-after--h3">😆 Use a trusted server to communicate with the App Store</li><li name="5f55" id="5f55" class="graf graf--li graf-after--li">😡 Do <strong class="markup--strong markup--li-strong">NOT</strong> post the receipt <strong class="markup--strong markup--li-strong">directly</strong> to the App Store to be validated</li></ul><h3 name="4481" id="4481" class="graf graf--h3 graf-after--li">On-Device Receipt Validation</h3><h4 name="38fc" id="38fc" class="graf graf--h4 graf-after--h3">The basics</h4><ul class="postList"><li name="9a64" id="9a64" class="graf graf--li graf-after--h4">Stored in the bundle<br>- API to get the path</li><li name="02df" id="02df" class="graf graf--li graf-after--li">Single file<br>- Purchase data<br>- Signature to check authenticity</li></ul><figure name="4ca6" id="4ca6" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 517px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 73.9%;"></div><img class="graf-image" data-image-id="1*nJzy3frUs7LaCl1WYYLXgg.png" data-width="1578" data-height="1166" src="https://cdn-images-1.medium.com/max/800/1*nJzy3frUs7LaCl1WYYLXgg.png"></div></figure><ul class="postList"><li name="9d32" id="9d32" class="graf graf--li graf-after--figure">Locate the receipt using Bundle API</li></ul><figure name="df60" id="df60" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 245px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 35.099999999999994%;"></div><img class="graf-image" data-image-id="1*SQYVEU5uAyEWWAMHhCu1ew.png" data-width="1820" data-height="638" src="https://cdn-images-1.medium.com/max/800/1*SQYVEU5uAyEWWAMHhCu1ew.png"></div></figure></div></div></section><section name="25a3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="f638" id="f638" class="graf graf--h4 graf--leading">Standards</h4><ul class="postList"><li name="e0d4" id="e0d4" class="graf graf--li graf-after--h4">Signing<br>- PKCS#7 Cryptographic Container</li><li name="74ec" id="74ec" class="graf graf--li graf-after--li">Data Encoding<br>- ASN.1</li><li name="d558" id="d558" class="graf graf--li graf-after--li graf--trailing">Options for verifying and reading<br>- OpenSSL, asn1c, and more<br>- Create your own</li></ul></div></div></section><section name="906e" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="efe3" id="efe3" class="graf graf--h4 graf--leading">Tips for using OpenSSL</h4><ul class="postList"><li name="0b14" id="0b14" class="graf graf--li graf-after--h4">Build your own static library (.a file)<br>- Not a dynamic library</li><li name="e209" id="e209" class="graf graf--li graf-after--li">Include Apple Root CA Certificate<br>- Available online<br>- If bundled in app, watch out for expiry</li><li name="ba4d" id="ba4d" class="graf graf--li graf-after--li graf--trailing">Documentation online</li></ul></div></div></section><section name="1428" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="177f" id="177f" class="graf graf--h4 graf--leading">Downloading pre-built solutions</h4><ul class="postList"><li name="bb0a" id="bb0a" class="graf graf--li graf-after--h4">Convenience comes at price<br>- Reusing code brings with it bugs and vulnerabilities<br>- Single exploit affects may</li><li name="29f7" id="29f7" class="graf graf--li graf-after--li">It’s <strong class="markup--strong markup--li-strong">your</strong> revenue stream<br>- Make decisions that suit your product<br>- Know and own the risks</li></ul><figure name="fcc3" id="fcc3" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 569px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 81.3%;"></div><img class="graf-image" data-image-id="1*JY6neC3-Ns3GJtV8XmwY8Q.png" data-width="1434" data-height="1166" src="https://cdn-images-1.medium.com/max/800/1*JY6neC3-Ns3GJtV8XmwY8Q.png"></div></figure></div></div></section><section name="01c1" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="7cc4" id="7cc4" class="graf graf--h4 graf--leading">Certificate verification</h4><ul class="postList"><li name="881a" id="881a" class="graf graf--li graf-after--h4">😡 Do not check the expiry date of the certificate relative to current date</li><li name="3faa" id="3faa" class="graf graf--li graf-after--li graf--trailing">😆 Compare expiry date to purchase date of the transaction</li></ul></div></div></section><section name="1a45" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="8b70" id="8b70" class="graf graf--h4 graf--leading">Receipt payload</h4><ul class="postList"><li name="c4bb" id="c4bb" class="graf graf--li graf-after--h4">Series of attributes<br>- Type<br>- Value<br>- ( Version )</li></ul><figure name="3fb3" id="3fb3" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 907px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 129.6%;"></div><img class="graf-image" data-image-id="1*NXVVHv2fHMgAUMem1HPw6A.png" data-width="1130" data-height="1464" src="https://cdn-images-1.medium.com/max/800/1*NXVVHv2fHMgAUMem1HPw6A.png"></div></figure></div></div></section><section name="249a" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="92ac" id="92ac" class="graf graf--h4 graf--leading">Verify application</h4><ul class="postList"><li name="1758" id="1758" class="graf graf--li graf-after--h4">Check the bundle identifier</li><li name="6acc" id="6acc" class="graf graf--li graf-after--li">Check the bundle version</li><li name="898b" id="898b" class="graf graf--li graf-after--li">Use hardcoded values<br>- Not Info.plist values</li><li name="3ef1" id="3ef1" class="graf graf--li graf-after--li">Attribute 5 is a SHA-1 hash of 3 key values<br>- Bundle identifier<br>- Device identifier<br>- Opaque value ( Attribute 4 )</li><li name="aff8" id="aff8" class="graf graf--li graf-after--li">Unique to your app on this device</li><li name="d2f2" id="d2f2" class="graf graf--li graf-after--li">Create hash using hardcoded values, compare</li></ul><figure name="bd87" id="bd87" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 910px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 130%;"></div><img class="graf-image" data-image-id="1*8LEYP46gd5QglcfgVC1YAA.png" data-width="1128" data-height="1466" src="https://cdn-images-1.medium.com/max/800/1*8LEYP46gd5QglcfgVC1YAA.png"></div></figure></div></div></section><section name="6ba1" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="3d3d" id="3d3d" class="graf graf--h4 graf--leading">Receipt refresh</h4><ul class="postList"><li name="e067" id="e067" class="graf graf--li graf-after--h4">If the receipt doesn’t exist or is invalid, refresh the receipt using <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">StoreKit</strong></code></li><li name="b03d" id="b03d" class="graf graf--li graf-after--li">Receipt refresh will require network</li><li name="1c7c" id="1c7c" class="graf graf--li graf-after--li">Store sign-in will be required</li><li name="1260" id="1260" class="graf graf--li graf-after--li">Avoid continuous loop of validate-and-refresh ⚠️</li></ul><figure name="79be" id="79be" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 124px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 17.599999999999998%;"></div><img class="graf-image" data-image-id="1*TJ5mL4GKaqD1aHF61JwCpQ.png" data-width="1836" data-height="324" src="https://cdn-images-1.medium.com/max/800/1*TJ5mL4GKaqD1aHF61JwCpQ.png"></div></figure><figure name="d315" id="d315" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 142px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 20.3%;"></div><img class="graf-image" data-image-id="1*IxE8ZKkS2UTY1DCssHr34Q.png" data-width="1590" data-height="322" src="https://cdn-images-1.medium.com/max/800/1*IxE8ZKkS2UTY1DCssHr34Q.png"></div></figure></div></div></section><section name="7ed7" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="be28" id="be28" class="graf graf--h4 graf--leading">Free Trials 👍</h4><ul class="postList"><li name="195f" id="195f" class="graf graf--li graf-after--h4">Iterate over In-App Purchases</li><li name="9cc0" id="9cc0" class="graf graf--li graf-after--li">If any has<strong class="markup--strong markup--li-strong"> </strong><code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">Full Unlock</strong></code><strong class="markup--strong markup--li-strong"> </strong>Product Identifier, unlock the app</li><li name="176b" id="176b" class="graf graf--li graf-after--li">If any has <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">Free Trail</strong></code> Product Identifier, compare current date to Purchase Date</li><li name="4d81" id="4d81" class="graf graf--li graf-after--li">If neither are present, display UI to begin <code class="markup--code markup--li-code"><strong class="markup--strong markup--li-strong">Free Trial</strong></code></li></ul><h3 name="6726" id="6726" class="graf graf--h3 graf-after--li">Changing Business Models ⚠️</h3><ul class="postList"><li name="380c" id="380c" class="graf graf--li graf-after--h3">When moving from<br>- Paid upfront to subscription<br>- Paid upfront to free trial</li><li name="1471" id="1471" class="graf graf--li graf-after--li">Maintain functionality that users have already paid for</li><li name="bc09" id="bc09" class="graf graf--li graf-after--li">Original application version in receipt</li></ul><figure name="cdad" id="cdad" class="graf graf--figure graf-after--li graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 479px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 68.4%;"></div><img class="graf-image" data-image-id="1*jpK1r-4K0b7r0mFlumuu7g.png" data-width="1128" data-height="772" src="https://cdn-images-1.medium.com/max/800/1*jpK1r-4K0b7r0mFlumuu7g.png"></div></figure></div></div></section>
</section>