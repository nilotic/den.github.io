---
layout: post
title:  "Managing Documents in your iOS Apps"
subtitle: "WWDC 2018"
date:   2018-07-19 20:23:33 -0000
background: '/img/posts/wwdc18.png'
---




<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Managing Documents in your iOS Apps</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Managing Documents in your iOS Apps</h1>
</header>
<section data-field="subtitle" class="p-summary">
WWDC 2018
</section>
<section data-field="body" class="e-content">
<section name="1a60" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="a5b1" id="a5b1" class="graf graf--h3 graf--leading graf--title">Managing Documents in your iOS Apps</h3><h4 name="086a" id="086a" class="graf graf--h4 graf-after--h3 graf--subtitle"><a href="https://developer.apple.com/videos/play/wwdc2018/216/" data-href="https://developer.apple.com/videos/play/wwdc2018/216/" class="markup--anchor markup--h4-anchor" rel="noopener" target="_blank">WWDC 2018</a></h4><h3 name="7131" id="7131" class="graf graf--h3 graf-after--h4">Client API</h3><figure name="7013" id="7013" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 191px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 27.3%;"></div><img class="graf-image" data-image-id="1*8Kst0-itX_cCrP1SOXUaqQ.png" data-width="2074" data-height="566" src="https://cdn-images-1.medium.com/max/800/1*8Kst0-itX_cCrP1SOXUaqQ.png"></div></figure><h3 name="6256" id="6256" class="graf graf--h3 graf-after--figure">File Provider API</h3><figure name="bcef" id="bcef" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 109px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 15.5%;"></div><img class="graf-image" data-image-id="1*ADoJdtKypW_k-rKtV96l6A.png" data-width="2060" data-height="320" src="https://cdn-images-1.medium.com/max/800/1*ADoJdtKypW_k-rKtV96l6A.png"></div></figure><h3 name="debf" id="debf" class="graf graf--h3 graf-after--figure">Validation tool</h3><ul class="postList"><li name="9716" id="9716" class="graf graf--li graf-after--h3">File Provider Validation tests your FileProvider Extension and guides you to fix the issues</li><li name="ea42" id="ea42" class="graf graf--li graf-after--li"><a href="https://developer.apple.com/download/more/" data-href="https://developer.apple.com/download/more/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://developer.apple.com/download/more/</a></li></ul><figure name="3e1a" id="3e1a" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 502px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 71.7%;"></div><img class="graf-image" data-image-id="1*L7-zeSC9O0_VlYHfP4qyjQ.png" data-width="1548" data-height="1110" src="https://cdn-images-1.medium.com/max/800/1*L7-zeSC9O0_VlYHfP4qyjQ.png"></div></figure><h3 name="cf4d" id="cf4d" class="graf graf--h3 graf-after--figure">Siri Shortcuts</h3><ul class="postList"><li name="140b" id="140b" class="graf graf--li graf-after--h3">File Provider Extension → Info.plist → <br>Add <strong class="markup--strong markup--li-strong">NSFileProviderUsesUniqueItemIdentifiersAcrossDevices</strong></li></ul><figure name="cd52" id="cd52" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 242px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 34.5%;"></div><img class="graf-image" data-image-id="1*NYcuqQJlAKGdESRwLDXkTw.png" data-width="1968" data-height="679" src="https://cdn-images-1.medium.com/max/800/1*NYcuqQJlAKGdESRwLDXkTw.png"></div></figure><figure name="fe12" id="fe12" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 504px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 72%;"></div><img class="graf-image" data-image-id="1*PI7Ck2-Fk526Xi-xGzRyfw.png" data-width="1526" data-height="1098" src="https://cdn-images-1.medium.com/max/800/1*PI7Ck2-Fk526Xi-xGzRyfw.png"></div></figure><figure name="2b79" id="2b79" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 502px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 71.7%;"></div><img class="graf-image" data-image-id="1*T0ii2GeApCEcscswbOn-sw.png" data-width="1528" data-height="1096" src="https://cdn-images-1.medium.com/max/800/1*T0ii2GeApCEcscswbOn-sw.png"></div></figure><h3 name="8901" id="8901" class="graf graf--h3 graf-after--figure">Sample App</h3><ul class="postList"><li name="d1de" id="d1de" class="graf graf--li graf-after--h3"><a href="https://developer.apple.com/documentation/scenekit/particles_building_a_uidocumentbrowserviewcontroller_based_application?language=objc" data-href="https://developer.apple.com/documentation/scenekit/particles_building_a_uidocumentbrowserviewcontroller_based_application?language=objc" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">Particles Sample App</a></li></ul><h3 name="a758" id="a758" class="graf graf--h3 graf-after--li">Document Picker vs Document Browser</h3><figure name="98cf" id="98cf" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 255px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 36.5%;"></div><img class="graf-image" data-image-id="1*6LnmIVUohwb5epru0wL4Kw.png" data-width="3571" data-height="1302" src="https://cdn-images-1.medium.com/max/800/1*6LnmIVUohwb5epru0wL4Kw.png"></div></figure><h3 name="a09f" id="a09f" class="graf graf--h3 graf-after--figure">UIDocumentBrowserViewController</h3><ul class="postList"><li name="b719" id="b719" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Starting point</strong> of your app<br><strong class="markup--strong markup--li-strong">Best practice</strong> is to <strong class="markup--strong markup--li-strong">make</strong> it the <strong class="markup--strong markup--li-strong">rootViewController</strong></li><li name="1738" id="1738" class="graf graf--li graf-after--li">Full screen</li><li name="390b" id="390b" class="graf graf--li graf-after--li">Open and organize your documents</li><li name="74f2" id="74f2" class="graf graf--li graf-after--li">All the features of the Files App</li><li name="d15d" id="d15d" class="graf graf--li graf-after--li">Can be customized</li><li name="f81f" id="f81f" class="graf graf--li graf-after--li">Present your own UI on top</li></ul><figure name="b779" id="b779" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 1067px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 152.5%;"></div><img class="graf-image" data-image-id="1*rQ3rHD6KDvi_84llf-PK1w.png" data-width="1084" data-height="1653" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*rQ3rHD6KDvi_84llf-PK1w.png"></div></figure><h3 name="a294" id="a294" class="graf graf--h3 graf-after--figure">UIDocumentPickerViewController</h3><ul class="postList"><li name="dacc" id="dacc" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Access</strong> files in the <strong class="markup--strong markup--li-strong">cloud</strong> (.<em class="markup--em markup--li-em">open</em>)</li><li name="22e8" id="22e8" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Move</strong> files to the <strong class="markup--strong markup--li-strong">cloud</strong> (.<em class="markup--em markup--li-em">moveToService</em>)</li><li name="3a5d" id="3a5d" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Copy</strong> from/to the <strong class="markup--strong markup--li-strong">cloud</strong> (.<em class="markup--em markup--li-em">import</em>, .<em class="markup--em markup--li-em">exportToService</em>)</li></ul><figure name="4eaa" id="4eaa" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 637px; max-height: 616px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 96.7%;"></div><img class="graf-image" data-image-id="1*1sg4EAQe3cMEBHbaV6Qfrg.gif" data-width="637" data-height="616" src="https://cdn-images-1.medium.com/max/800/1*1sg4EAQe3cMEBHbaV6Qfrg.gif"></div></figure><h4 name="67d3" id="67d3" class="graf graf--h4 graf-after--figure">Example</h4><figure name="2abe" id="2abe" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 322px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46%;"></div><img class="graf-image" data-image-id="1*lZw2Ngp0jI3Eg2WsosbZLw.png" data-width="3704" data-height="1703" src="https://cdn-images-1.medium.com/max/800/1*lZw2Ngp0jI3Eg2WsosbZLw.png"></div></figure><h3 name="8b12" id="8b12" class="graf graf--h3 graf-after--figure">Document Types</h3><ul class="postList"><li name="509a" id="509a" class="graf graf--li graf-after--h3">let the system know which files your application handles</li></ul><h4 name="2f49" id="2f49" class="graf graf--h4 graf-after--li">2 Steps</h4><ul class="postList"><li name="6269" id="6269" class="graf graf--li graf-after--h4">Declaring the type if it isn’t already declared by iOS</li><li name="df20" id="df20" class="graf graf--li graf-after--li">Claiming that you can view or edit files of this type</li></ul><h3 name="f765" id="f765" class="graf graf--h3 graf-after--li">Declaring a Type</h3><ul class="postList"><li name="9067" id="9067" class="graf graf--li graf-after--h3"><a href="https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1" data-href="https://developer.apple.com/library/archive/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">More Detail</a></li></ul><figure name="0029" id="0029" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 302px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 43.1%;"></div><img class="graf-image" data-image-id="1*TNqX-rcM2yHirZORDX01jg.png" data-width="3127" data-height="1349" src="https://cdn-images-1.medium.com/max/800/1*TNqX-rcM2yHirZORDX01jg.png"></div></figure><h3 name="efe5" id="efe5" class="graf graf--h3 graf-after--figure">Declaring a New File Type</h3><ul class="postList"><li name="0ae9" id="0ae9" class="graf graf--li graf-after--h3">My type conforms to <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">public.data</em></strong>, <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">public.content</em></strong></li></ul><figure name="7094" id="7094" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 290px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 41.4%;"></div><img class="graf-image" data-image-id="1*7qEnlfO2wXxXb9IpWAh5og.png" data-width="2743" data-height="1136" src="https://cdn-images-1.medium.com/max/800/1*7qEnlfO2wXxXb9IpWAh5og.png"></div></figure><figure name="4169" id="4169" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 191px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 27.3%;"></div><img class="graf-image" data-image-id="1*yOgoFpFDlIohiDE5qq3pMA.png" data-width="2320" data-height="633" src="https://cdn-images-1.medium.com/max/800/1*yOgoFpFDlIohiDE5qq3pMA.png"></div></figure><h3 name="f863" id="f863" class="graf graf--h3 graf-after--figure">Type Conformance</h3><figure name="1351" id="1351" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 745px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 106.5%;"></div><img class="graf-image" data-image-id="1*f5DfWOuabTZpUjBwkFiYlg.png" data-width="2865" data-height="3050" src="https://cdn-images-1.medium.com/max/800/1*f5DfWOuabTZpUjBwkFiYlg.png"></div></figure><h3 name="909d" id="909d" class="graf graf--h3 graf-after--figure">Claiming Support for a Type</h3><figure name="a52a" id="a52a" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 273px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 39%;"></div><img class="graf-image" data-image-id="1*Gv2j6ye2J1SOanVeudV6Fw.png" data-width="2669" data-height="1042" src="https://cdn-images-1.medium.com/max/800/1*Gv2j6ye2J1SOanVeudV6Fw.png"></div></figure><h3 name="a401" id="a401" class="graf graf--h3 graf-after--figure">Your App and the Sandbox</h3><figure name="c680" id="c680" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 408px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 58.3%;"></div><img class="graf-image" data-image-id="1*3H7QbMS03udpEcjdyQU8nw.png" data-width="2897" data-height="1688" src="https://cdn-images-1.medium.com/max/800/1*3H7QbMS03udpEcjdyQU8nw.png"></div></figure><figure name="c4c6" id="c4c6" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 321px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 45.9%;"></div><img class="graf-image" data-image-id="1*Eth6uBnTmJBnMKLThIkRAA.gif" data-width="1279" data-height="587" src="https://cdn-images-1.medium.com/max/800/1*Eth6uBnTmJBnMKLThIkRAA.gif"></div></figure><figure name="03cc" id="03cc" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 383px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 54.7%;"></div><img class="graf-image" data-image-id="1*K4dwHnbmpRUruKdECuf7yQ.png" data-width="3241" data-height="1772" src="https://cdn-images-1.medium.com/max/800/1*K4dwHnbmpRUruKdECuf7yQ.png"></div></figure><h3 name="8b66" id="8b66" class="graf graf--h3 graf-after--figure">Coordinating File Access</h3><ul class="postList"><li name="948f" id="948f" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">NSFileCoordinator</strong>, <strong class="markup--strong markup--li-strong">NSFIlePresenter</strong></li><li name="c69b" id="c69b" class="graf graf--li graf-after--li">Wide Multiple reader/single writer lock</li><li name="8172" id="8172" class="graf graf--li graf-after--li">Instructs the system to download the document</li></ul><figure name="23f4" id="23f4" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 639px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 91.2%;"></div><img class="graf-image" data-image-id="1*mgg-ILuGGm2miRgP_0BAmg.png" data-width="1837" data-height="1676" src="https://cdn-images-1.medium.com/max/800/1*mgg-ILuGGm2miRgP_0BAmg.png"></div></figure><h3 name="60fe" id="60fe" class="graf graf--h3 graf-after--figure">Restore the UI State</h3><figure name="ef77" id="ef77" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 176px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 25.2%;"></div><img class="graf-image" data-image-id="1*ilRqPbj6Nj0TjeGn_W9-fw.png" data-width="3342" data-height="842" src="https://cdn-images-1.medium.com/max/800/1*ilRqPbj6Nj0TjeGn_W9-fw.png"></div></figure><h4 name="d368" id="d368" class="graf graf--h4 graf-after--figure">How do we implement it?</h4><ul class="postList"><li name="9d0c" id="9d0c" class="graf graf--li graf-after--h4">Use a <strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Bookmark</em></strong></li></ul><figure name="99ef" id="99ef" class="graf graf--figure graf-after--li"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.3%;"></div><img class="graf-image" data-image-id="1*7De9_nh7Itq_fNraUhP4Lg.gif" data-width="1280" data-height="720" src="https://cdn-images-1.medium.com/max/800/1*7De9_nh7Itq_fNraUhP4Lg.gif"></div></figure><figure name="b295" id="b295" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 149px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 21.2%;"></div><img class="graf-image" data-image-id="1*ofz3_LBDGxHEiTIwDFKh7A.png" data-width="3596" data-height="764" src="https://cdn-images-1.medium.com/max/800/1*ofz3_LBDGxHEiTIwDFKh7A.png"></div></figure><h4 name="448a" id="448a" class="graf graf--h4 graf-after--figure">Encode/ Decode restorableState example</h4><figure name="aac9" id="aac9" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 494px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 70.6%;"></div><img class="graf-image" data-image-id="1*aa1M4FHmhDqs4DxZE901kg.png" data-width="3496" data-height="2468" src="https://cdn-images-1.medium.com/max/800/1*aa1M4FHmhDqs4DxZE901kg.png"></div></figure><figure name="8920" id="8920" class="graf graf--figure graf-after--figure"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 413px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 59%;"></div><img class="graf-image" data-image-id="1*6EU_UvHidfXjfKxPPGVTeA.png" data-width="3570" data-height="2106" src="https://cdn-images-1.medium.com/max/800/1*6EU_UvHidfXjfKxPPGVTeA.png"></div><figcaption class="imageCaption">Encode/ Decode restorableState example</figcaption></figure><h3 name="3341" id="3341" class="graf graf--h3 graf-after--figure">Open In Place</h3><figure name="82cc" id="82cc" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 355px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 50.7%;"></div><img class="graf-image" data-image-id="1*AArX8keoR4I_LnPRnNWfiA.png" data-width="3407" data-height="1728" src="https://cdn-images-1.medium.com/max/800/1*AArX8keoR4I_LnPRnNWfiA.png"></div></figure><figure name="d922" id="d922" class="graf graf--figure graf-after--figure graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 438px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 62.5%;"></div><img class="graf-image" data-image-id="1*FwvERuchiKdmUFy0L63ueQ.png" data-width="3040" data-height="1901" src="https://cdn-images-1.medium.com/max/800/1*FwvERuchiKdmUFy0L63ueQ.png"></div></figure></div></div></section>
</section>